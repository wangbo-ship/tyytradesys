"use strict";(self["webpackChunktyy_trade"]=self["webpackChunktyy_trade"]||[]).push([[406],{47406:function(e,t,o){o.r(t),o.d(t,{default:function(){return u}});var a=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{width:"100%",display:"flex","justify-content":"center"}},[t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"80%","margin-top":"0.5rem",padding:"20px",display:"flex",border:"1px dashed gray"},attrs:{"element-loading-text":"成果上传中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0)"}},[t("div",{staticStyle:{flex:"2",padding:"20px"}},[t("div",{staticClass:"commonInput"},[t("el-form",{ref:"formup",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"成果名称",prop:"name"}},[t("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"成果级别",prop:"level"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:function(t){return e.clearBlur(["formup","formdown1","formdown2","formdown3","formdown4"])}},model:{value:e.form.level,callback:function(t){e.$set(e.form,"level",t)},expression:"form.level"}},[t("el-option",{attrs:{label:"全国级",value:"全国级"}}),t("el-option",{attrs:{label:"区域级",value:"区域级"}}),t("el-option",{attrs:{label:"项目级",value:"项目级"}}),t("el-option",{attrs:{label:"工点级",value:"工点级"}})],1)],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"成果类型",prop:"type"}},[t("el-select",{staticStyle:{width:"100%"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[t("el-option",{attrs:{label:"地质图",value:"地质图"}}),t("el-option",{attrs:{label:"钻孔",value:"钻孔"}}),t("el-option",{attrs:{label:"地震数据",value:"地震数据"}}),t("el-option",{attrs:{label:"气象数据",value:"气象数据"}}),t("el-option",{attrs:{label:"平面地质图",value:"平面地质图"}}),t("el-option",{attrs:{label:"地质纵断面",value:"地质纵断面"}}),t("el-option",{attrs:{label:"构造纲要图",value:"构造纲要图"}}),t("el-option",{attrs:{label:"工程地质钻孔",value:"工程地质钻孔"}}),t("el-option",{attrs:{label:"遥感地质解译",value:"遥感地质解译"}}),t("el-option",{attrs:{label:"工程地质调绘",value:"工程地质调绘"}}),t("el-option",{attrs:{label:"工程线位",value:"工程线位"}}),t("el-option",{attrs:{label:"地球物理勘探",value:"地球物理勘探"}}),t("el-option",{attrs:{label:"原位测试成果",value:"原位测试成果"}}),t("el-option",{attrs:{label:"原位测试成果（岩）",value:"原位测试成果（岩）"}}),t("el-option",{attrs:{label:"原位测试成果（土）",value:"原位测试成果（土）"}}),t("el-option",{attrs:{label:"原位测试成果（水）",value:"原位测试成果（水）"}}),t("el-option",{attrs:{label:"其他",value:"其他"}})],1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"数据格式",prop:"format"}},[t("el-select",{staticStyle:{width:"100%"},model:{value:e.form.format,callback:function(t){e.$set(e.form,"format",t)},expression:"form.format"}},[t("el-option",{attrs:{label:"DWG",value:"DWG"}}),t("el-option",{attrs:{label:"MapGIS",value:"MapGIS"}}),t("el-option",{attrs:{label:"Shapefiles",value:"Shapefiles"}}),t("el-option",{attrs:{label:"Excel",value:"Excel"}}),t("el-option",{attrs:{label:"Access MDB",value:"Access MDB"}}),t("el-option",{attrs:{label:"KML/KMZ",value:"KML/KMZ"}})],1)],1)],1)],1)],1)],1),t("div",{staticClass:"dynamicInput"},["全国级"===e.form.level?t("div",[t("el-form",{ref:"formdown1",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"成果描述"}},[t("el-input",{staticStyle:{width:"100%"},attrs:{rows:"4",type:"textarea"},model:{value:e.form.descCountry,callback:function(t){e.$set(e.form,"descCountry",t)},expression:"form.descCountry"}})],1),t("el-form-item",{attrs:{label:"成果附件",prop:"attachment"}},[t("el-upload",{staticClass:"upload-attachment",attrs:{"auto-upload":!1,action:"#","on-change":e.attachCountryChange,"on-remove":e.attachCountryRemove,multiple:"","file-list":e.form.fileListCountry}},[t("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1)],1)],1):e._e(),"区域级"===e.form.level?t("div",[t("el-form",{ref:"formdown2",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"空间范围"}},[t("el-radio",{attrs:{label:"经纬度范围"},model:{value:e.selectedjwd,callback:function(t){e.selectedjwd=t},expression:"selectedjwd"}},[e._v("经纬度范围")]),t("el-radio",{attrs:{label:"经纬距范围"},model:{value:e.selectedjwd,callback:function(t){e.selectedjwd=t},expression:"selectedjwd"}},[e._v("经纬距范围")]),t("div",{staticStyle:{width:"70%"}},["经纬度范围"===e.selectedjwd?t("div",{staticStyle:{color:"black"}},[t("span",[e._v("西南点:")]),e._v(" "),t("span",[e._v("L:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.spatical.southWestLatL,expression:"form.spatical.southWestLatL"}],domProps:{value:e.form.spatical.southWestLatL},on:{input:function(t){t.target.composing||e.$set(e.form.spatical,"southWestLatL",t.target.value)}}}),e._v(" "),t("span",[e._v("B:")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.spatical.southWestLatB,expression:"form.spatical.southWestLatB"}],domProps:{value:e.form.spatical.southWestLatB},on:{input:function(t){t.target.composing||e.$set(e.form.spatical,"southWestLatB",t.target.value)}}}),e._v(" "),t("br"),t("span",[e._v("东北点:")]),e._v(" "),t("span",[e._v("L:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.spatical.northEastLatL,expression:"form.spatical.northEastLatL"}],domProps:{value:e.form.spatical.northEastLatL},on:{input:function(t){t.target.composing||e.$set(e.form.spatical,"northEastLatL",t.target.value)}}}),e._v(" "),t("span",[e._v("B:")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.spatical.northEastLatB,expression:"form.spatical.northEastLatB"}],domProps:{value:e.form.spatical.northEastLatB},on:{input:function(t){t.target.composing||e.$set(e.form.spatical,"northEastLatB",t.target.value)}}}),e._v(" "),t("br")]):e._e(),"经纬距范围"===e.selectedjwd?t("div",{staticStyle:{color:"black"}},[t("span",[e._v("中央经线:")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.form.spatical.centerline,expression:"form.spatical.centerline"}],staticStyle:{width:"150px"},on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.form.spatical,"centerline",t.target.multiple?o:o[0])}}},[t("option",{attrs:{value:"117E"}},[e._v("117E")]),t("option",{attrs:{value:"114E"}},[e._v("114E")]),t("option",{attrs:{value:"111E"}},[e._v("111E")])]),e._v(" "),t("br"),t("span",[e._v("投影分带:")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.form.spatical.reflectzone,expression:"form.spatical.reflectzone"}],staticStyle:{width:"150px"},on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.form.spatical,"reflectzone",t.target.multiple?o:o[0])}}},[t("option",{attrs:{value:"6°分带"}},[e._v("6°分带")]),t("option",{attrs:{value:"3°分带"}},[e._v("3°分带")])]),e._v(" "),t("br"),t("span",[e._v("西南点:")]),e._v(" "),t("span",[e._v("X:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.spatical.southWestDisX,expression:"form.spatical.southWestDisX"}],domProps:{value:e.form.spatical.southWestDisX},on:{input:function(t){t.target.composing||e.$set(e.form.spatical,"southWestDisX",t.target.value)}}}),e._v(" "),t("span",[e._v("Y:")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.spatical.southWestDisY,expression:"form.spatical.southWestDisY"}],domProps:{value:e.form.spatical.southWestDisY},on:{input:function(t){t.target.composing||e.$set(e.form.spatical,"southWestDisY",t.target.value)}}}),e._v(" "),t("br"),t("span",[e._v("东北点:")]),e._v(" "),t("span",[e._v("X:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.spatical.northEastDisX,expression:"form.spatical.northEastDisX"}],domProps:{value:e.form.spatical.northEastDisX},on:{input:function(t){t.target.composing||e.$set(e.form.spatical,"northEastDisX",t.target.value)}}}),e._v(" "),t("span",[e._v("Y:")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.spatical.northEastDisY,expression:"form.spatical.northEastDisY"}],domProps:{value:e.form.spatical.northEastDisY},on:{input:function(t){t.target.composing||e.$set(e.form.spatical,"northEastDisY",t.target.value)}}}),e._v(" "),t("br")]):e._e()])],1),t("el-form-item",{attrs:{label:"成果描述"}},[t("el-input",{staticStyle:{width:"100%"},attrs:{rows:"4",type:"textarea"},model:{value:e.form.descRegion,callback:function(t){e.$set(e.form,"descRegion",t)},expression:"form.descRegion"}})],1),t("el-form-item",{attrs:{label:"成果附件",prop:"attachment"}},[t("el-upload",{staticClass:"upload-attachment",attrs:{"auto-upload":!1,action:"#","on-change":e.attachRegionChange,"on-remove":e.attachRegionRemove,multiple:"","file-list":e.form.fileListRegion}},[t("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1)],1)],1):e._e(),"项目级"===e.form.level?t("div",[t("el-form",{ref:"formdown3",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"空间范围"}},[t("el-radio",{attrs:{label:"经纬度范围"},model:{value:e.selectedjwdDemo,callback:function(t){e.selectedjwdDemo=t},expression:"selectedjwdDemo"}},[e._v("经纬度范围")]),t("el-radio",{attrs:{label:"经纬距范围"},model:{value:e.selectedjwdDemo,callback:function(t){e.selectedjwdDemo=t},expression:"selectedjwdDemo"}},[e._v("经纬距范围")]),t("div",{staticStyle:{width:"70%"}},["经纬度范围"===e.selectedjwdDemo?t("div",{staticStyle:{color:"black"}},[t("span",[e._v("西南点:")]),e._v(" "),t("span",[e._v("L:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.demoSpatical.southWestLatL,expression:"form.demoSpatical.southWestLatL"}],domProps:{value:e.form.demoSpatical.southWestLatL},on:{input:function(t){t.target.composing||e.$set(e.form.demoSpatical,"southWestLatL",t.target.value)}}}),e._v(" "),t("span",[e._v("B:")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.demoSpatical.southWestLatB,expression:"form.demoSpatical.southWestLatB"}],domProps:{value:e.form.demoSpatical.southWestLatB},on:{input:function(t){t.target.composing||e.$set(e.form.demoSpatical,"southWestLatB",t.target.value)}}}),e._v(" "),t("br"),t("span",[e._v("东北点:")]),e._v(" "),t("span",[e._v("L:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.demoSpatical.northEastLatL,expression:"form.demoSpatical.northEastLatL"}],domProps:{value:e.form.demoSpatical.northEastLatL},on:{input:function(t){t.target.composing||e.$set(e.form.demoSpatical,"northEastLatL",t.target.value)}}}),e._v(" "),t("span",[e._v("B:")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.demoSpatical.northEastLatB,expression:"form.demoSpatical.northEastLatB"}],domProps:{value:e.form.demoSpatical.northEastLatB},on:{input:function(t){t.target.composing||e.$set(e.form.demoSpatical,"northEastLatB",t.target.value)}}}),e._v(" "),t("br")]):e._e(),"经纬距范围"===e.selectedjwdDemo?t("div",{staticStyle:{color:"black"}},[t("span",[e._v("中央经线:")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.form.demoSpatical.centerline,expression:"form.demoSpatical.centerline"}],staticStyle:{width:"150px"},on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.form.demoSpatical,"centerline",t.target.multiple?o:o[0])}}},[t("option",{attrs:{value:"117E"}},[e._v("117E")]),t("option",{attrs:{value:"114E"}},[e._v("114E")]),t("option",{attrs:{value:"111E"}},[e._v("111E")])]),e._v(" "),t("br"),t("span",[e._v("投影分带:")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.form.demoSpatical.reflectzone,expression:"form.demoSpatical.reflectzone"}],staticStyle:{width:"150px"},on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.form.demoSpatical,"reflectzone",t.target.multiple?o:o[0])}}},[t("option",{attrs:{value:"6°分带"}},[e._v("6°分带")]),t("option",{attrs:{value:"3°分带"}},[e._v("3°分带")])]),e._v(" "),t("br"),t("span",[e._v("西南点:")]),e._v(" "),t("span",[e._v("X:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.demoSpatical.southWestDisX,expression:"form.demoSpatical.southWestDisX"}],domProps:{value:e.form.demoSpatical.southWestDisX},on:{input:function(t){t.target.composing||e.$set(e.form.demoSpatical,"southWestDisX",t.target.value)}}}),e._v(" "),t("span",[e._v("Y:")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.demoSpatical.southWestDisY,expression:"form.demoSpatical.southWestDisY"}],domProps:{value:e.form.demoSpatical.southWestDisY},on:{input:function(t){t.target.composing||e.$set(e.form.demoSpatical,"southWestDisY",t.target.value)}}}),e._v(" "),t("br"),t("span",[e._v("东北点:")]),e._v(" "),t("span",[e._v("X:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.demoSpatical.northEastDisX,expression:"form.demoSpatical.northEastDisX"}],domProps:{value:e.form.demoSpatical.northEastDisX},on:{input:function(t){t.target.composing||e.$set(e.form.demoSpatical,"northEastDisX",t.target.value)}}}),e._v(" "),t("span",[e._v("Y:")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.demoSpatical.northEastDisY,expression:"form.demoSpatical.northEastDisY"}],domProps:{value:e.form.demoSpatical.northEastDisY},on:{input:function(t){t.target.composing||e.$set(e.form.demoSpatical,"northEastDisY",t.target.value)}}}),e._v(" "),t("br")]):e._e()])],1),t("el-form-item",{attrs:{label:"项目名称",prop:"addProName"}},[t("el-select",{staticStyle:{width:"45%"},attrs:{placeholder:"请选择"},model:{value:e.form.selectDemo,callback:function(t){e.$set(e.form,"selectDemo",t)},expression:"form.selectDemo"}},e._l(e.newDemoList,(function(e,o){return t("el-option",{key:e.projectName,attrs:{label:e.projectName,value:e.projectName}})})),1),t("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary",round:""},on:{click:function(t){e.demoDialogFormVisible=!0}}},[e._v("添加新项目")]),t("el-dialog",{attrs:{"modal-append-to-body":!1,title:"添加新项目",visible:e.demoDialogFormVisible},on:{"update:visible":function(t){e.demoDialogFormVisible=t}}},[t("el-form",{attrs:{model:e.form.demoForm}},[t("el-form-item",{staticStyle:{width:"75%"},attrs:{label:"项目名称","label-width":e.demoFormLabelWidth}},[t("el-input",{model:{value:e.form.demoForm.name,callback:function(t){e.$set(e.form.demoForm,"name",t)},expression:"form.demoForm.name"}})],1),t("el-form-item",{staticStyle:{"margin-top":"10px",width:"75%"},attrs:{label:"项目编号","label-width":e.demoFormLabelWidth}},[t("el-input",{model:{value:e.form.demoForm.code,callback:function(t){e.$set(e.form.demoForm,"code",t)},expression:"form.demoForm.code"}})],1),t("el-form-item",{staticStyle:{"margin-top":"10px",width:"75%"},attrs:{label:"建设单位","label-width":e.demoFormLabelWidth}},[t("el-input",{model:{value:e.form.demoForm.employer,callback:function(t){e.$set(e.form.demoForm,"employer",t)},expression:"form.demoForm.employer"}})],1),t("el-form-item",{staticStyle:{"margin-top":"10px",width:"75%"},attrs:{label:"施工单位","label-width":e.demoFormLabelWidth}},[t("el-input",{model:{value:e.form.demoForm.constractor,callback:function(t){e.$set(e.form.demoForm,"constractor",t)},expression:"form.demoForm.constractor"}})],1),t("el-form-item",{staticStyle:{"margin-top":"10px",width:"75%"},attrs:{label:"工程起点","label-width":e.demoFormLabelWidth}},[t("el-input",{model:{value:e.form.demoForm.start,callback:function(t){e.$set(e.form.demoForm,"start",t)},expression:"form.demoForm.start"}})],1),t("el-form-item",{staticStyle:{"margin-top":"10px",width:"75%"},attrs:{label:"工程止点","label-width":e.demoFormLabelWidth}},[t("el-input",{model:{value:e.form.demoForm.end,callback:function(t){e.$set(e.form.demoForm,"end",t)},expression:"form.demoForm.end"}})],1),t("el-form-item",{staticStyle:{"margin-top":"10px",width:"75%"},attrs:{label:"起点冠词代号","label-width":e.demoFormLabelWidth}},[t("el-input",{model:{value:e.form.demoForm.startname,callback:function(t){e.$set(e.form.demoForm,"startname",t)},expression:"form.demoForm.startname"}})],1),t("el-form-item",{staticStyle:{"margin-top":"10px",width:"75%"},attrs:{label:"起点里程","label-width":e.demoFormLabelWidth}},[t("el-input",{model:{value:e.form.demoForm.startroad,callback:function(t){e.$set(e.form.demoForm,"startroad",t)},expression:"form.demoForm.startroad"}})],1),t("el-form-item",{staticStyle:{"margin-top":"10px",width:"75%"},attrs:{label:"止点冠词代号","label-width":e.demoFormLabelWidth}},[t("el-input",{model:{value:e.form.demoForm.endname,callback:function(t){e.$set(e.form.demoForm,"endname",t)},expression:"form.demoForm.endname"}})],1),t("el-form-item",{staticStyle:{"margin-top":"10px",width:"75%"},attrs:{label:"止点里程","label-width":e.demoFormLabelWidth}},[t("el-input",{model:{value:e.form.demoForm.endroad,callback:function(t){e.$set(e.form.demoForm,"endroad",t)},expression:"form.demoForm.endroad"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"danger"},on:{click:function(t){e.demoDialogFormVisible=!1,e.addNewDemo("项目")}}},[e._v("添加")]),t("el-button",{attrs:{type:"info"},on:{click:function(t){e.demoDialogFormVisible=!1}}},[e._v("取 消")])],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"线路方案"}},[t("el-input",{model:{value:e.form.linePlan,callback:function(t){e.$set(e.form,"linePlan",t)},expression:"form.linePlan"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"勘察阶段",prop:"exploreStage"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.form.exploreStage,callback:function(t){e.$set(e.form,"exploreStage",t)},expression:"form.exploreStage"}},[t("el-option",{attrs:{label:"踏勘/预可研",value:"踏勘/预可研"}}),t("el-option",{attrs:{label:"初测/可研",value:"初测/可研"}}),t("el-option",{attrs:{label:"定测/初步设计",value:"定测/初步设计"}}),t("el-option",{attrs:{label:"补充定测/施工图设计",value:"补充定测/施工图设计"}}),t("el-option",{attrs:{label:"施工勘察",value:"施工勘察"}})],1)],1)],1)],1),t("el-form-item",{attrs:{label:"成果描述"}},[t("el-input",{staticStyle:{width:"100%"},attrs:{rows:"4",type:"textarea"},model:{value:e.form.descDemo,callback:function(t){e.$set(e.form,"descDemo",t)},expression:"form.descDemo"}})],1),t("el-form-item",{attrs:{label:"成果附件",prop:"attachment"}},[t("el-upload",{staticClass:"upload-attachment",attrs:{"auto-upload":!1,action:"#","on-change":e.attachDemoChange,"on-remove":e.attachDemoRemove,multiple:"","file-list":e.form.fileListDemo}},[t("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1),t("el-form-item",{attrs:{label:"校审文件",prop:"checkfile"}},[t("el-upload",{staticClass:"upload-attachment",attrs:{"auto-upload":!1,action:"#","on-change":e.checkDemoChange,"on-remove":e.checkDemoRemove,multiple:"","file-list":e.form.fileListDemoCheck}},[t("el-button",{attrs:{size:"small",type:"warning"}},[e._v("点击上传")])],1)],1)],1)],1):e._e(),"工点级"===e.form.level?t("div",[t("el-form",{ref:"formdown4",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"空间范围"}},[t("el-radio",{attrs:{label:"经纬度范围"},model:{value:e.selectedjwdDot,callback:function(t){e.selectedjwdDot=t},expression:"selectedjwdDot"}},[e._v("经纬度范围")]),t("el-radio",{attrs:{label:"经纬距范围"},model:{value:e.selectedjwdDot,callback:function(t){e.selectedjwdDot=t},expression:"selectedjwdDot"}},[e._v("经纬距范围")]),t("div",{staticStyle:{width:"70%"}},["经纬度范围"===e.selectedjwdDot?t("div",{staticStyle:{color:"black"}},[t("span",[e._v("西南点:")]),e._v(" "),t("span",[e._v("L:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.dotSpatical.southWestLatL,expression:"form.dotSpatical.southWestLatL"}],domProps:{value:e.form.dotSpatical.southWestLatL},on:{input:function(t){t.target.composing||e.$set(e.form.dotSpatical,"southWestLatL",t.target.value)}}}),e._v(" "),t("span",[e._v("B:")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.dotSpatical.southWestLatB,expression:"form.dotSpatical.southWestLatB"}],domProps:{value:e.form.dotSpatical.southWestLatB},on:{input:function(t){t.target.composing||e.$set(e.form.dotSpatical,"southWestLatB",t.target.value)}}}),e._v(" "),t("br"),t("span",[e._v("东北点:")]),e._v(" "),t("span",[e._v("L:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.dotSpatical.northEastLatL,expression:"form.dotSpatical.northEastLatL"}],domProps:{value:e.form.dotSpatical.northEastLatL},on:{input:function(t){t.target.composing||e.$set(e.form.dotSpatical,"northEastLatL",t.target.value)}}}),e._v(" "),t("span",[e._v("B:")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.dotSpatical.northEastLatB,expression:"form.dotSpatical.northEastLatB"}],domProps:{value:e.form.dotSpatical.northEastLatB},on:{input:function(t){t.target.composing||e.$set(e.form.dotSpatical,"northEastLatB",t.target.value)}}}),e._v(" "),t("br")]):e._e(),"经纬距范围"===e.selectedjwdDot?t("div",{staticStyle:{color:"black"}},[t("span",[e._v("中央经线:")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.form.dotSpatical.centerline,expression:"form.dotSpatical.centerline"}],staticStyle:{width:"150px"},on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.form.dotSpatical,"centerline",t.target.multiple?o:o[0])}}},[t("option",{attrs:{value:"117E"}},[e._v("117E")]),t("option",{attrs:{value:"114E"}},[e._v("114E")]),t("option",{attrs:{value:"111E"}},[e._v("111E")])]),e._v(" "),t("br"),t("span",[e._v("投影分带:")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.form.dotSpatical.reflectzone,expression:"form.dotSpatical.reflectzone"}],staticStyle:{width:"150px"},on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.form.dotSpatical,"reflectzone",t.target.multiple?o:o[0])}}},[t("option",{attrs:{value:"6°分带"}},[e._v("6°分带")]),t("option",{attrs:{value:"3°分带"}},[e._v("3°分带")])]),e._v(" "),t("br"),t("span",[e._v("西南点:")]),e._v(" "),t("span",[e._v("X:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.dotSpatical.southWestDisX,expression:"form.dotSpatical.southWestDisX"}],domProps:{value:e.form.dotSpatical.southWestDisX},on:{input:function(t){t.target.composing||e.$set(e.form.dotSpatical,"southWestDisX",t.target.value)}}}),e._v(" "),t("span",[e._v("Y:")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.dotSpatical.southWestDisY,expression:"form.dotSpatical.southWestDisY"}],domProps:{value:e.form.dotSpatical.southWestDisY},on:{input:function(t){t.target.composing||e.$set(e.form.dotSpatical,"southWestDisY",t.target.value)}}}),e._v(" "),t("br"),t("span",[e._v("东北点:")]),e._v(" "),t("span",[e._v("X:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.dotSpatical.northEastDisX,expression:"form.dotSpatical.northEastDisX"}],domProps:{value:e.form.dotSpatical.northEastDisX},on:{input:function(t){t.target.composing||e.$set(e.form.dotSpatical,"northEastDisX",t.target.value)}}}),e._v(" "),t("span",[e._v("Y:")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.dotSpatical.northEastDisY,expression:"form.dotSpatical.northEastDisY"}],domProps:{value:e.form.dotSpatical.northEastDisY},on:{input:function(t){t.target.composing||e.$set(e.form.dotSpatical,"northEastDisY",t.target.value)}}}),e._v(" "),t("br")]):e._e()])],1),t("el-form-item",{attrs:{label:"项目名称",prop:"addProName"}},[t("el-select",{staticStyle:{width:"45%"},attrs:{placeholder:"请选择"},on:{change:e.getprjCode},model:{value:e.form.selectDotDemo,callback:function(t){e.$set(e.form,"selectDotDemo",t)},expression:"form.selectDotDemo"}},e._l(e.newDemoList,(function(e){return t("el-option",{key:e.projectName,attrs:{label:e.projectName,value:e.projectName}})})),1),t("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary",round:""},on:{click:function(t){e.dotdemoDialogFormVisible=!0}}},[e._v("添加新项目")]),t("el-dialog",{attrs:{"modal-append-to-body":!1,title:"添加新项目",visible:e.dotdemoDialogFormVisible},on:{"update:visible":function(t){e.dotdemoDialogFormVisible=t}}},[t("el-form",{attrs:{model:e.form.dotDemoForm}},[t("el-form-item",{staticStyle:{width:"75%"},attrs:{label:"项目名称","label-width":e.dotDemoFormLabelWidth}},[t("el-input",{model:{value:e.form.dotDemoForm.name,callback:function(t){e.$set(e.form.dotDemoForm,"name",t)},expression:"form.dotDemoForm.name"}})],1),t("el-form-item",{staticStyle:{"margin-top":"10px",width:"75%"},attrs:{label:"项目编号","label-width":e.dotDemoFormLabelWidth}},[t("el-input",{model:{value:e.form.dotDemoForm.code,callback:function(t){e.$set(e.form.dotDemoForm,"code",t)},expression:"form.dotDemoForm.code"}})],1),t("el-form-item",{staticStyle:{"margin-top":"10px",width:"75%"},attrs:{label:"建设单位","label-width":e.dotDemoFormLabelWidth}},[t("el-input",{model:{value:e.form.dotDemoForm.employer,callback:function(t){e.$set(e.form.dotDemoForm,"employer",t)},expression:"form.dotDemoForm.employer"}})],1),t("el-form-item",{staticStyle:{"margin-top":"10px",width:"75%"},attrs:{label:"施工单位","label-width":e.dotDemoFormLabelWidth}},[t("el-input",{model:{value:e.form.dotDemoForm.constractor,callback:function(t){e.$set(e.form.dotDemoForm,"constractor",t)},expression:"form.dotDemoForm.constractor"}})],1),t("el-form-item",{staticStyle:{"margin-top":"10px",width:"75%"},attrs:{label:"工程起点","label-width":e.dotDemoFormLabelWidth}},[t("el-input",{model:{value:e.form.dotDemoForm.start,callback:function(t){e.$set(e.form.dotDemoForm,"start",t)},expression:"form.dotDemoForm.start"}})],1),t("el-form-item",{staticStyle:{"margin-top":"10px",width:"75%"},attrs:{label:"工程止点","label-width":e.dotDemoFormLabelWidth}},[t("el-input",{model:{value:e.form.dotDemoForm.end,callback:function(t){e.$set(e.form.dotDemoForm,"end",t)},expression:"form.dotDemoForm.end"}})],1),t("el-form-item",{staticStyle:{"margin-top":"10px",width:"75%"},attrs:{label:"起点冠词代号","label-width":e.dotDemoFormLabelWidth}},[t("el-input",{model:{value:e.form.dotDemoForm.startname,callback:function(t){e.$set(e.form.dotDemoForm,"startname",t)},expression:"form.dotDemoForm.startname"}})],1),t("el-form-item",{staticStyle:{"margin-top":"10px",width:"75%"},attrs:{label:"起点里程","label-width":e.dotDemoFormLabelWidth}},[t("el-input",{model:{value:e.form.dotDemoForm.startroad,callback:function(t){e.$set(e.form.dotDemoForm,"startroad",t)},expression:"form.dotDemoForm.startroad"}})],1),t("el-form-item",{staticStyle:{"margin-top":"10px",width:"75%"},attrs:{label:"止点冠词代号","label-width":e.dotDemoFormLabelWidth}},[t("el-input",{model:{value:e.form.dotDemoForm.endname,callback:function(t){e.$set(e.form.dotDemoForm,"endname",t)},expression:"form.dotDemoForm.endname"}})],1),t("el-form-item",{staticStyle:{"margin-top":"10px",width:"75%"},attrs:{label:"止点里程","label-width":e.dotDemoFormLabelWidth}},[t("el-input",{model:{value:e.form.dotDemoForm.endroad,callback:function(t){e.$set(e.form.dotDemoForm,"endroad",t)},expression:"form.dotDemoForm.endroad"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dotdemoDialogFormVisible=!1,e.addNewDemo("工点项目")}}},[e._v("添加")]),t("el-button",{attrs:{type:"info"},on:{click:function(t){e.dotdemoDialogFormVisible=!1}}},[e._v("取 消")])],1)],1)],1),t("el-form-item",{attrs:{label:"工点名称",prop:"addDotName"}},[t("el-select",{staticStyle:{width:"45%"},attrs:{placeholder:"请选择"},model:{value:e.form.selectDot,callback:function(t){e.$set(e.form,"selectDot",t)},expression:"form.selectDot"}},e._l(e.newDotList,(function(e,o){return t("el-option",{key:o,attrs:{label:e,value:e}})})),1),t("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary",round:""},on:{click:function(t){e.dotDialogFormVisible=!0}}},[e._v("添加新工点")]),t("el-dialog",{attrs:{"modal-append-to-body":!1,title:"添加新工点",visible:e.dotDialogFormVisible},on:{"update:visible":function(t){e.dotDialogFormVisible=t}}},[t("el-form",{attrs:{model:e.form.dotForm}},[t("el-form-item",{staticStyle:{"margin-top":"10px",width:"75%"},attrs:{label:"项目编号","label-width":e.dotDemoFormLabelWidth}},[t("el-input",{staticStyle:{width:"100%"},attrs:{disabled:""},model:{value:e.form.dotForm.selectPrjCode,callback:function(t){e.$set(e.form.dotForm,"selectPrjCode",t)},expression:"form.dotForm.selectPrjCode"}})],1),t("el-form-item",{staticStyle:{"margin-top":"10px",width:"75%"},attrs:{label:"工点名称","label-width":e.dotDemoFormLabelWidth}},[t("el-input",{model:{value:e.form.dotForm.name,callback:function(t){e.$set(e.form.dotForm,"name",t)},expression:"form.dotForm.name"}})],1),t("el-form-item",{staticStyle:{"margin-top":"10px",width:"75%"},attrs:{label:"工点类型","label-width":e.dotDemoFormLabelWidth}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.form.dotForm.type,callback:function(t){e.$set(e.form.dotForm,"type",t)},expression:"form.dotForm.type"}},[t("el-option",{attrs:{label:"路基",value:"路基"}}),t("el-option",{attrs:{label:"桥梁",value:"桥梁"}}),t("el-option",{attrs:{label:"隧道",value:"隧道"}}),t("el-option",{attrs:{label:"弃渣场",value:"弃渣场"}})],1)],1),t("el-form-item",{staticStyle:{"margin-top":"10px",width:"75%"},attrs:{label:"工点地址","label-width":e.dotDemoFormLabelWidth}},[t("el-input",{model:{value:e.form.dotForm.address,callback:function(t){e.$set(e.form.dotForm,"address",t)},expression:"form.dotForm.address"}})],1),t("el-form-item",{staticStyle:{"margin-top":"10px",width:"75%"},attrs:{label:"起点冠词代号","label-width":e.dotDemoFormLabelWidth}},[t("el-input",{model:{value:e.form.dotForm.startname,callback:function(t){e.$set(e.form.dotForm,"startname",t)},expression:"form.dotForm.startname"}})],1),t("el-form-item",{staticStyle:{"margin-top":"10px",width:"75%"},attrs:{label:"起点里程","label-width":e.dotDemoFormLabelWidth}},[t("el-input",{model:{value:e.form.dotForm.startroad,callback:function(t){e.$set(e.form.dotForm,"startroad",t)},expression:"form.dotForm.startroad"}})],1),t("el-form-item",{staticStyle:{"margin-top":"10px",width:"75%"},attrs:{label:"止点冠词代号","label-width":e.dotDemoFormLabelWidth}},[t("el-input",{model:{value:e.form.dotForm.endname,callback:function(t){e.$set(e.form.dotForm,"endname",t)},expression:"form.dotForm.endname"}})],1),t("el-form-item",{staticStyle:{"margin-top":"10px",width:"75%"},attrs:{label:"止点里程","label-width":e.dotDemoFormLabelWidth}},[t("el-input",{model:{value:e.form.dotForm.endroad,callback:function(t){e.$set(e.form.dotForm,"endroad",t)},expression:"form.dotForm.endroad"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dotDialogFormVisible=!1,e.addNewDot()}}},[e._v("添加")]),t("el-button",{attrs:{type:"info"},on:{click:function(t){e.dotDialogFormVisible=!1}}},[e._v("取 消")])],1)],1)],1),t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"线路方案"}},[t("el-input",{model:{value:e.form.dotLinePlan,callback:function(t){e.$set(e.form,"dotLinePlan",t)},expression:"form.dotLinePlan"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"勘察阶段",prop:"exploreStage"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.form.dotExploreStage,callback:function(t){e.$set(e.form,"dotExploreStage",t)},expression:"form.dotExploreStage"}},[t("el-option",{attrs:{label:"踏勘/预可研",value:"踏勘/预可研"}}),t("el-option",{attrs:{label:"初测/可研",value:"初测/可研"}}),t("el-option",{attrs:{label:"定测/初步设计",value:"定测/初步设计"}}),t("el-option",{attrs:{label:"补充定测/施工图设计",value:"补充定测/施工图设计"}}),t("el-option",{attrs:{label:"施工勘察",value:"施工勘察"}})],1)],1)],1)],1),t("el-form-item",{attrs:{label:"成果描述"}},[t("el-input",{staticStyle:{width:"100%"},attrs:{rows:"4",type:"textarea"},model:{value:e.form.descDot,callback:function(t){e.$set(e.form,"descDot",t)},expression:"form.descDot"}})],1),t("el-form-item",{attrs:{label:"成果附件",prop:"attachment"}},[t("el-upload",{staticClass:"upload-attachment",attrs:{"auto-upload":!1,action:"#","on-change":e.attachDotChange,"on-remove":e.attachDotRemove,multiple:"","file-list":e.form.fileListDot}},[t("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1),t("el-form-item",{attrs:{label:"校审文件",prop:"checkfile"}},[t("el-upload",{staticClass:"upload-attachment",attrs:{"auto-upload":!1,action:"#","on-change":e.checkDotChange,"on-remove":e.checkDotRemove,multiple:"","file-list":e.form.fileListDotCheck}},[t("el-button",{attrs:{size:"small",type:"warning"}},[e._v("点击上传")])],1)],1)],1)],1):e._e()]),t("div",{staticClass:"submitInput"},[t("el-row",[t("el-col",{attrs:{span:24}},[t("el-button",{staticStyle:{float:"right"},attrs:{type:"danger"},on:{click:function(t){return e.submitForm(["formup"])}}},[e._v("成果上传")]),t("el-button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{type:"info"},on:{click:e.clearFormDatas}},[e._v("取消")])],1)],1)],1)]),t("div",{staticClass:"imgRefresh",staticStyle:{flex:"1"}},[t("el-carousel",{staticStyle:{border:"1px solid black"},attrs:{interval:3e3,arrow:"always"}},e._l(e.showImgs,(function(e){return t("el-carousel-item",{key:e.img},[t("div",{staticClass:"image-container"},[t("img",{staticStyle:{"max-width":"100%","max-height":"100%","object-fit":"contain"},attrs:{src:e,alt:"轮播图"}})])])})),1),t("div",{staticClass:"actions-container",staticStyle:{display:"flex","justify-content":"space-evenly","align-items":"center"}},[t("div",{staticClass:"title"},[e._v("成果缩略图")]),t("el-upload",{staticClass:"upload-demo",attrs:{accept:".jpg,.png",action:"#",multiple:!0,"auto-upload":!1,"on-change":e.imgHandlePreview}},[t("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传")])],1),t("el-upload",{staticClass:"update-demo",attrs:{accept:".jpg,.png",action:"#",multiple:!0,"auto-upload":!1,"on-change":e.imgHandleReplace}},[t("el-button",{attrs:{size:"small",type:"primary"}},[e._v("更新")])],1)],1)],1)])])},l=[],r=(o(57658),o(62062),o(58576));const s={add:"/addPrjInfo",delete:"/deletePrjById",find:"/getPrjByName",edict:"/updatePrjInfo"};var i={addPrjInfo(e){return(0,r.Z)({method:"POST",url:s.add,data:e})},deletePrjById(e){return(0,r.Z)({method:"GET",url:s.delete,prjId:e})},getPrjByName(e){return(0,r.Z)({methode:"GET",url:s.find,params:{projectName:e}})},updatePrjInfo(e){return(0,r.Z)({method:"POST",url:s.edict,data:e})}};const n={add:"/addWorkSiteInfo",delete:"/deleteWSById",find:"/getAllWorksite",edict:"/updateWorkSiteInfo"};var m={addWorkSiteInfo(e){return(0,r.Z)({method:"POST",url:n.add,data:e})},deleteWSById(e){return(0,r.Z)({method:"GET",url:n.delete,worksiteId:e})},getAllWorksite(){return(0,r.Z)({methode:"GET",url:n.find})},updateWorkSiteInfo(e){return(0,r.Z)({method:"POST",url:n.edict,data:e})}},d=(o(37662),o(95410),{data(){return{loading:!1,showImgs:[],selectedjwd:"",selectedjwdDemo:"",selectedjwdDot:"",demoDialogFormVisible:!1,dotdemoDialogFormVisible:!1,dotDialogFormVisible:!1,demoFormLabelWidth:"120px",dotDemoFormLabelWidth:"120px",newDemoList:[],newDotList:[],form:{name:"",level:"",type:"",format:"",fileListAbri:[],personName:"wb",descCountry:"",fileListCountry:[],descRegion:"",fileListRegion:[],spatical:{southWestLatL:"",northEastLatL:"",southWestLatB:"",northEastLatB:"",centerline:"",reflectzone:"",southWestDisX:"",southWestDisY:"",northEastDisX:"",northEastDisY:""},descDemo:"",fileListDemo:[],fileListDemoCheck:[],demoForm:{name:"",code:"",employer:"",constractor:"",start:"",end:"",startname:"",endname:"",startroad:"",endroad:""},selectDemo:"",exploreStage:"",linePlan:"",demoSpatical:{southWestLatL:"",northEastLatL:"",southWestLatB:"",northEastLatB:"",centerline:"",reflectzone:"",southWestDisX:"",southWestDisY:"",northEastDisX:"",northEastDisY:""},descDot:"",fileListDot:[],fileListDotCheck:[],dotDemoForm:{name:"",code:"",employer:"",constractor:"",start:"",end:"",startname:"",endname:"",startroad:"",endroad:""},dotForm:{name:"",type:"",address:"",startname:"",startroad:"",endname:"",endroad:"",selectPrjCode:""},selectDotDemo:"",selectDot:"",dotExploreStage:"",dotLinePlan:"",dotSpatical:{southWestLatL:"",northEastLatL:"",southWestLatB:"",northEastLatB:"",centerline:"",reflectzone:"",southWestDisX:"",southWestDisY:"",northEastDisX:"",northEastDisY:""}},rules:{name:[{required:!0,message:"请输入成果名称",trigger:"blur"}],level:[{required:!0,message:"请输入成果级别",trigger:"blur"}],type:[{required:!0,message:"请选择成果类型",trigger:"change"}],format:[{required:!0,message:"请选择数据格式",trigger:"change"}],attachment:[{required:!0,message:"请选择附件上传",trigger:"blur"}],addProName:[{required:!0,message:"请添加项目",trigger:"blur"}],addDotName:[{required:!0,message:"请添加工点",trigger:"blur"}],exploreStage:[{required:!0,message:"请选择勘探阶断",trigger:"change"}],checkfile:[{required:!0,message:"请选校审文件上传",trigger:"blur"}]}}},methods:{imgHandlePreview(e){this.showImgs.push(URL.createObjectURL(e.raw)),this.form.fileListAbri.push(e),console.log("缩略图fileListAbri",this.form.fileListAbri),console.log("showIMGS",this.showImgs)},imgHandleReplace(e){this.showImgs=[],this.form.fileListAbri=[],this.showImgs.push(URL.createObjectURL(e.raw)),this.form.fileListAbri.push(e),console.log("缩略图fileListAbri",this.form.fileListAbri),console.log("showIMGS",this.showImgs)},attachCountryChange(e,t){this.form.fileListCountry=t,console.log("fileListCountry",this.form.fileListCountry)},attachCountryRemove(e){console.log("file",e)},attachRegionChange(e,t){this.form.fileListRegion=t,console.log("fileListRegion",this.form.fileListRegion)},attachRegionRemove(e){console.log("file",e)},attachDemoChange(e,t){this.form.fileListDemo=t,console.log("fileListDemo",this.form.fileListDemo)},attachDemoRemove(e){console.log("file",e)},checkDemoChange(e,t){this.form.fileListDemoCheck=t,console.log("fileListDemoCheck",this.form.fileListDemoCheck)},checkDemoRemove(e){console.log("file",e)},attachDotChange(e,t){this.form.fileListDot=t,console.log("fileListDot",this.form.fileListDot)},attachDotRemove(e){console.log("file",e)},checkDotChange(e,t){this.form.fileListDotCheck=t,console.log("fileListDotCheck",this.form.fileListDotCheck)},checkDotRemove(e){console.log("file",e)},setSubmitTime(){const e=new Date,t=e.getFullYear(),o=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0"),l=String(e.getHours()).padStart(2,"0"),r=String(e.getMinutes()).padStart(2,"0");return`${t}-${o}-${a} ${l}:${r}`},async getprjCode(){let e=await i.getPrjByName(this.form.selectDotDemo);console.log("选中项目对应的信息",e.data.data[0].worksiteInfo),this.form.dotForm.selectPrjCode=e.data.data[0].projectCode,this.newDotList=e.data.data[0].worksiteInfo.map((e=>e.worksiteName))},async getProjects(){let e=await i.getPrjByName();this.$nextTick((()=>{this.newDemoList=e.data.data}))},async getDots(){let e=await m.getAllWorksite();this.$nextTick((()=>{this.newDotList=e.data.data}))},async addNewDemo(e){if("项目"===e){let e={buildUnit:this.form.demoForm.employer,constructUnit:this.form.demoForm.constractor,startMileage:Number(this.form.demoForm.startroad),endMileage:Number(this.form.demoForm.endroad),startPrefix:this.form.demoForm.startname,endPrefix:this.form.demoForm.endname,projectStart:this.form.demoForm.start,projectEnd:this.form.demoForm.end,projectName:this.form.demoForm.name,projectCode:this.form.demoForm.code},t=await i.addPrjInfo(e);200===t.data.code&&(this.$message({type:"success",message:"添加成功"}),this.getProjects())}else if("工点项目"===e){let e={buildUnit:this.form.dotDemoForm.employer,constructUnit:this.form.dotDemoForm.constractor,startMileage:Number(this.form.dotDemoForm.startroad),endMileage:Number(this.form.dotDemoForm.endroad),startPrefix:this.form.dotDemoForm.startname,endPrefix:this.form.dotDemoForm.endname,projectStart:this.form.dotDemoForm.start,projectEnd:this.form.dotDemoForm.end,projectName:this.form.dotDemoForm.name,projectCode:this.form.dotDemoForm.code},t=await i.addPrjInfo(e);200===t.data.code&&(this.$message({type:"success",message:"添加成功"}),this.getProjects())}},async addNewDot(){let e={startMileage:Number(this.form.dotForm.startroad),endMileage:Number(this.form.dotForm.endroad),startPrefix:this.form.dotForm.startname,endPrefix:this.form.dotForm.endname,worksiteAddr:this.form.dotForm.address,worksiteName:this.form.dotForm.name,worksiteType:this.form.dotForm.type,projectCode:this.form.dotForm.selectPrjCode},t=await m.addWorkSiteInfo(e);console.log(t),200===t.data.code&&(this.$message({type:"success",message:"已成功添加工点"}),this.getDots())},submitForm(e){let t=!0;if("全国级"===this.form.level?e.push("formdown1"):"区域级"===this.form.level?e.push("formdown2"):"项目级"===this.form.level?e.push("formdown3"):"工点级"===this.form.level&&e.push("formdown4"),console.log("当前formNames",e),e.forEach((e=>{this.$refs[e].validate((e=>{e||(t=!1)}))})),!t)return!1;this.addGeoResult()},addGeoResult(){let e=this.form.fileListAbri.map((e=>({annexData:e.raw,annexType:3,order:1})));if("全国级"===this.form.level&&this.form.name&&this.form.format&&this.form.type&&this.form.fileListCountry[0]){this.loading=!0;let o=this.form.fileListCountry.map((e=>({annexData:e.raw,annexType:1,order:1}))),a=JSON.stringify({type:this.form.type,level:this.form.level,submitTime:this.setSubmitTime(),personName:this.form.personName}),l=new FormData;for(let t=0;t<e.length;t++)l.append(`annexes[${t}].annexData`,e[t].annexData),l.append(`annexes[${t}].annexType`,3),l.append(`annexes[${t}].order`,1);for(let t=e.length;t<o.length+e.length;t++)l.append(`annexes[${t}].annexData`,o[t-e.length].annexData),l.append(`annexes[${t}].annexType`,1),l.append(`annexes[${t}].order`,1);for(var t of(l.append("resultName",this.form.name),l.append("contextType",this.form.format),l.append("resultRemark",this.form.descCountry),l.append("resultLevel",this.form.level),l.append("resultType",this.form.type),l.append("resultDetails",a),l.keys()))console.log("key:"+t+" value:"+l.get(t));r.Z.post("/addGeoResult",l).then((e=>{console.log(e),200===e.data.code?(this.$message({type:"success",message:"上传成功"}),this.clearFormDatas(),this.loading=!1):500===e.data.code&&(this.$message({type:"warning",message:`${e.data.data}(不同文件类型的文件不可重复)`}),this.loading=!1)})).catch((e=>{console.log(e),this.$message({type:"danger",message:"上传失败"})}))}else if("区域级"===this.form.level&&this.form.name&&this.form.format&&this.form.type&&this.form.fileListRegion[0]){this.loading=!0;let o=this.form.fileListRegion.map((e=>({annexData:e.raw,annexType:1,order:1}))),a=JSON.stringify({type:this.form.type,level:this.form.level,spatical:this.form.spatical,submitTime:this.setSubmitTime(),personName:this.form.personName}),l=new FormData;for(let t=0;t<e.length;t++)l.append(`annexes[${t}].annexData`,e[t].annexData),l.append(`annexes[${t}].annexType`,3),l.append(`annexes[${t}].order`,1);for(let t=e.length;t<o.length+e.length;t++)l.append(`annexes[${t}].annexData`,o[t-e.length].annexData),l.append(`annexes[${t}].annexType`,1),l.append(`annexes[${t}].order`,1);for(var t of(l.append("resultName",this.form.name),l.append("contextType",this.form.format),l.append("resultRemark",this.form.descRegion),l.append("resultLevel",this.form.level),l.append("resultType",this.form.type),l.append("resultDetails",a),l.keys()))console.log("key:"+t+" value:"+l.get(t));r.Z.post("/addGeoResult",l).then((e=>{console.log(e),200===e.data.code?(this.$message({type:"success",message:"上传成功"}),this.clearFormDatas(),this.loading=!1):500===e.data.code&&(this.$message({type:"warning",message:`${e.data.data}(不同文件类型的文件不可重复)`}),this.loading=!1)})).catch((e=>{console.log(e),this.$message({type:"danger",message:"上传失败"})}))}else if("项目级"===this.form.level&&this.form.name&&this.form.format&&this.form.type&&this.form.fileListDemo[0]&&this.form.fileListDemoCheck[0]){this.loading=!0,console.log(this.form.level);let o=this.form.fileListDemo.map((e=>({annexData:e.raw,annexType:1,order:1}))),a=this.form.fileListDemoCheck.map((e=>({annexData:e.raw,annexType:2,order:1}))),l=new FormData;for(let t=0;t<e.length;t++)l.append(`annexes[${t}].annexData`,e[t].annexData),l.append(`annexes[${t}].annexType`,3),l.append(`annexes[${t}].order`,1);for(let t=e.length;t<o.length+e.length;t++)l.append(`annexes[${t}].annexData`,o[t-e.length].annexData),l.append(`annexes[${t}].annexType`,1),l.append(`annexes[${t}].order`,1);for(let t=o.length+e.length;t<o.length+e.length+a.length;t++)l.append(`annexes[${t}].annexData`,a[t-e.length-o.length].annexData),l.append(`annexes[${t}].annexType`,2),l.append(`annexes[${t}].order`,1);l.append("resultName",this.form.name),l.append("contextType",this.form.format),l.append("resultRemark",this.form.descDemo),l.append("resultLevel",this.form.level),l.append("resultType",this.form.type);let s=JSON.stringify({type:this.form.type,level:this.form.level,spatical:this.form.demoSpatical,personName:this.form.personName,exploreStage:this.form.exploreStage,linePlan:this.form.linePlan,submitTime:this.setSubmitTime(),demoFormName:this.form.selectDemo});for(var t of(l.append("resultDetails",s),l.keys()))console.log("key:"+t+" value:"+l.get(t));r.Z.post("/addGeoResult",l).then((e=>{console.log(e),200===e.data.code?(this.$message({type:"success",message:"上传成功"}),this.clearFormDatas(),this.loading=!1):500===e.data.code&&(this.$message({type:"warning",message:`${e.data.data}(不同文件类型的文件不可重复)`}),this.loading=!1)})).catch((e=>{console.log(e),this.$message({type:"danger",message:"上传失败"})}))}else if("工点级"===this.form.level&&this.form.name&&this.form.format&&this.form.type&&this.form.fileListDot[0]&&this.form.fileListDotCheck[0]){this.loading=!0;let o=this.form.fileListDot.map((e=>({annexData:e.raw,annexType:1,order:1}))),a=this.form.fileListDotCheck.map((e=>({annexData:e.raw,annexType:2,order:1}))),l=new FormData;for(let t=0;t<e.length;t++)l.append(`annexes[${t}].annexData`,e[t].annexData),l.append(`annexes[${t}].annexType`,3),l.append(`annexes[${t}].order`,1);for(let t=e.length;t<o.length+e.length;t++)l.append(`annexes[${t}].annexData`,o[t-e.length].annexData),l.append(`annexes[${t}].annexType`,1),l.append(`annexes[${t}].order`,1);for(let t=o.length+e.length;t<o.length+e.length+a.length;t++)l.append(`annexes[${t}].annexData`,a[t-e.length-o.length].annexData),l.append(`annexes[${t}].annexType`,2),l.append(`annexes[${t}].order`,1);l.append("resultName",this.form.name),l.append("contextType",this.form.format),l.append("resultRemark",this.form.descDot),l.append("resultLevel",this.form.level),l.append("resultType",this.form.type);let s=JSON.stringify({type:this.form.type,level:this.form.level,spatical:this.form.dotSpatical,exploreStage:this.form.dotExploreStage,linePlan:this.form.dotLinePlan,personName:this.form.personName,submitTime:this.setSubmitTime(),demoFormName:this.form.selectDotDemo,dotFormName:this.form.selectDot});for(var t of(l.append("resultDetails",s),l.keys()))console.log("key:"+t+" value:"+l.get(t));r.Z.post("/addGeoResult",l).then((e=>{console.log(e),200===e.data.code?(this.$message({type:"success",message:"上传成功"}),this.clearFormDatas(),this.loading=!1):500===e.data.code&&(this.$message({type:"warning",message:`${e.data.data}(不同文件类型的文件不可重复)`}),this.loading=!1)})).catch((e=>{console.log(e),this.$message({type:"danger",message:"上传失败"})}))}else this.$message({type:"warning",message:"请完整填写必填内容"});this.showImgs=[],console.log("form",this.form)},clearBlur(e){e.forEach((e=>{this.$refs[e].clearValidate()}))},clearFormDatas(){this.form={name:"",level:"",type:"",format:"",fileListAbri:[],personName:"wb",descCountry:"",fileListCountry:[],descRegion:"",fileListRegion:[],spatical:{southWestLatL:"",northEastLatL:"",southWestLatB:"",northEastLatB:"",centerline:"",reflectzone:"",southWestDisX:"",southWestDisY:"",northEastDisX:"",northEastDisY:""},descDemo:"",fileListDemo:[],fileListDemoCheck:[],demoForm:{name:"",code:"",employer:"",constractor:"",start:"",end:"",startname:"",endname:"",startroad:"",endroad:""},selectDemo:"",exploreStage:"",linePlan:"",demoSpatical:{southWestLatL:"",northEastLatL:"",southWestLatB:"",northEastLatB:"",centerline:"",reflectzone:"",southWestDisX:"",southWestDisY:"",northEastDisX:"",northEastDisY:""},descDot:"",fileListDot:[],fileListDotCheck:[],dotDemoForm:{name:"",code:"",employer:"",constractor:"",start:"",end:"",startname:"",endname:"",startroad:"",endroad:""},dotForm:{name:"",type:"",address:"",startname:"",startroad:"",endname:"",endroad:"",selectPrjCode:""},selectDotDemo:"",selectDot:"",dotExploreStage:"",dotLinePlan:"",dotSpatical:{southWestLatL:"",northEastLatL:"",southWestLatB:"",northEastLatB:"",centerline:"",reflectzone:"",southWestDisX:"",southWestDisY:"",northEastDisX:"",northEastDisY:""}},this.showImgs=[],this.clearBlur(["formup","formdown1","formdown2","formdown3","formdown4"])}},mounted(){this.getProjects(),this.getDots()}}),p=d,c=o(1001),f=(0,c.Z)(p,a,l,!1,null,"40d8ec32",null),u=f.exports}}]);
//# sourceMappingURL=406.891bbfa9.js.map