(self["webpackChunktyy_trade"]=self["webpackChunktyy_trade"]||[]).push([[615],{86615:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return c}});var r=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{position:"relative"},attrs:{id:"catalog"}},[e("div",{},[e("MapVue")],1),e("div",{staticStyle:{position:"absolute",top:"10px",left:"10px"}},[e("LeftTreeVue")],1)])},n=[],o=i(51195),s=i(98719),a={components:{MapVue:o["default"],LeftTreeVue:s["default"]},data(){return{inputSearch:""}},created(){},computed:{},methods:{findMapDot(){console.log(this.inputSearch)}}},h=a,l=i(1001),u=(0,l.Z)(h,r,n,!1,null,"2793007e",null),c=u.exports},98719:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return u}});var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"directory-container",staticStyle:{opacity:"1"}},[e("div",{staticClass:"directory-header"},[e("span",{staticClass:"directory-title"},[t._v("成果目录")]),e("span",[e("i",{staticClass:"el-icon-s-fold",staticStyle:{"font-size":"19px",color:"#2E6DFC"},on:{click:function(e){t.isCollapsed=!t.isCollapsed}}})])]),e("div",{staticStyle:{"margin-top":"0px","background-color":"#FFFFFF"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.isCollapsed,expression:"isCollapsed"}],staticStyle:{padding:"10px"}},[e("el-input",{attrs:{placeholder:"级别/名称等关键词","suffix-icon":"el-icon-search"},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}})],1),e("el-collapse-transition",[e("div",{directives:[{name:"show",rawName:"v-show",value:t.isCollapsed,expression:"isCollapsed"}]},[e("div",{staticClass:"transition-box"},[e("el-tree",{ref:"tree",staticClass:"filter-tree",attrs:{"filter-node-method":t.filterNode,data:t.data,"default-expand-all":!0,props:t.defaultProps},on:{"node-click":t.handleNodeClick},scopedSlots:t._u([{key:"default",fn:function({node:i,data:r}){return e("span",{staticClass:"slot-t-node"},[[e("i",{class:{"el-icon-folder":!i.expanded,"el-icon-folder-opened":i.expanded,"el-icon-s-claim":"全国级"!==i.label&&"区域级"!==i.label&&"项目级"!==i.label&&"工点级"!==i.label},staticStyle:{color:"#409eff"}}),e("span",[t._v(t._s(i.label))])]],2)}}])})],1)])])],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isCollapsed,expression:"isCollapsed"}],staticClass:"directory-footer"},[e("a",{staticClass:"link",on:{click:function(e){return t.toTypeTable()}}},[t._v("列表查看")])])])},n=[],o=(i(57658),i(41490)),s={data(){return{filterText:"",isCollapsed:!0,data:[],defaultProps:{children:"children",label:"label"}}},watch:{filterText(t){this.$refs.tree.filter(t)}},mounted(){this.getAllGeoResults(),this.getTree()},methods:{filterNode(t,e){return!t||-1!==e.label.indexOf(t)},handleNodeClick(t){t.value&&(t.value.resultDetails.spatical?(this.$store.commit("results/setNodeSpatical",t.value.resultDetails.spatical),this.$store.commit("results/setNodeInfo",t.value)):this.$message({type:"info",message:"无坐标点位"}))},toTypeTable(){this.$router.push("/typeTable")},async getAllGeoResults(){let t=await o.Z.findGeoResultList();console.log("成果列表",t.data.data),this.$store.commit("results/setGeoResults",t.data.data)},async getTree(){let t=await o.Z.getGeoResultTree();this.data=t.data.data.children,console.log("目录树",this.data)}}},a=s,h=i(1001),l=(0,h.Z)(a,r,n,!1,null,"b79a68cc",null),u=l.exports},51195:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return _i}});var r=function(){var t=this;t._self._c;return t._m(0)},n=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"wrapper"},[e("div",{staticClass:"map",attrs:{id:"olMap"}})])}],o=(i(71827),i(26998)),s=i(3591),a=i(27501),h=i(40637),l=i(66850),u=i(30396),c=i(99370),f=i(68721),p=i(40479),d=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),_=function(t){function e(e){var i=t.call(this)||this;if(i.id_=void 0,i.geometryName_="geometry",i.style_=null,i.styleFunction_=void 0,i.geometryChangeKey_=null,i.addEventListener((0,u.v_)(i.geometryName_),i.handleGeometryChanged_),e)if("function"===typeof e.getSimplifiedGeometry){var r=e;i.setGeometry(r)}else{var n=e;i.setProperties(n)}return i}return d(e,t),e.prototype.clone=function(){var t=new e(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());var i=this.getGeometry();i&&t.setGeometry(i.clone());var r=this.getStyle();return r&&t.setStyle(r),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&((0,p.bN)(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=(0,p.oL)(t,c.Z.CHANGE,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?g(t):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){this.removeEventListener((0,u.v_)(this.geometryName_),this.handleGeometryChanged_),this.geometryName_=t,this.addEventListener((0,u.v_)(this.geometryName_),this.handleGeometryChanged_),this.handleGeometryChanged_()},e}(u.ZP);function g(t){if("function"===typeof t)return t;var e;if(Array.isArray(t))e=t;else{(0,f.h)("function"===typeof t.getZIndex,41);var i=t;e=[i]}return function(){return e}}var y=_,v=i(98936),m=i(77874),x=i(60186),S=i(69955),I=i(86515),T=i(95196),E=function(){function t(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=(0,T.Pq)(t.scale),this.displacement_=t.displacement}return t.prototype.clone=function(){var e=this.getScale();return new t({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()})},t.prototype.getOpacity=function(){return this.opacity_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getScaleArray=function(){return this.scaleArray_},t.prototype.getDisplacement=function(){return this.displacement_},t.prototype.getAnchor=function(){return(0,I.O3)()},t.prototype.getImage=function(t){return(0,I.O3)()},t.prototype.getHitDetectionImage=function(t){return(0,I.O3)()},t.prototype.getPixelRatio=function(t){return 1},t.prototype.getImageState=function(){return(0,I.O3)()},t.prototype.getImageSize=function(){return(0,I.O3)()},t.prototype.getHitDetectionImageSize=function(){return(0,I.O3)()},t.prototype.getOrigin=function(){return(0,I.O3)()},t.prototype.getSize=function(){return(0,I.O3)()},t.prototype.setOpacity=function(t){this.opacity_=t},t.prototype.setRotateWithView=function(t){this.rotateWithView_=t},t.prototype.setRotation=function(t){this.rotation_=t},t.prototype.setScale=function(t){this.scale_=t,this.scaleArray_=(0,T.Pq)(t)},t.prototype.listenImageChange=function(t){(0,I.O3)()},t.prototype.load=function(){(0,I.O3)()},t.prototype.unlistenImageChange=function(t){(0,I.O3)()},t}(),O=E,C=i(50773);function R(t){return Array.isArray(t)?(0,C.BB)(t):t}var w=i(79811),L=i(42577),k=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),D=function(t){function e(e){var i=this,r=void 0!==e.rotateWithView&&e.rotateWithView;return i=t.call(this,{opacity:1,rotateWithView:r,rotation:void 0!==e.rotation?e.rotation:0,scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0]})||this,i.canvas_={},i.hitDetectionCanvas_={},i.fill_=void 0!==e.fill?e.fill:null,i.origin_=[0,0],i.points_=e.points,i.radius_=void 0!==e.radius?e.radius:e.radius1,i.radius2_=e.radius2,i.angle_=void 0!==e.angle?e.angle:0,i.stroke_=void 0!==e.stroke?e.stroke:null,i.anchor_=null,i.size_=null,i.imageSize_=null,i.hitDetectionImageSize_=null,i.render(),i}return k(e,t),e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.getAnchor=function(){return this.anchor_},e.prototype.getAngle=function(){return this.angle_},e.prototype.getFill=function(){return this.fill_},e.prototype.getHitDetectionImage=function(t){if(!this.hitDetectionCanvas_[t||1]){var e=this.createRenderOptions();this.createHitDetectionCanvas_(e,t||1)}return this.hitDetectionCanvas_[t||1]},e.prototype.getImage=function(t){if(!this.canvas_[t||1]){var e=this.createRenderOptions(),i=(0,w.E4)(e.size*t||1,e.size*t||1);this.draw_(e,i,0,0,t||1),this.canvas_[t||1]=i.canvas}return this.canvas_[t||1]},e.prototype.getPixelRatio=function(t){return t},e.prototype.getImageSize=function(){return this.imageSize_},e.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_},e.prototype.getImageState=function(){return S.Z.LOADED},e.prototype.getOrigin=function(){return this.origin_},e.prototype.getPoints=function(){return this.points_},e.prototype.getRadius=function(){return this.radius_},e.prototype.getRadius2=function(){return this.radius2_},e.prototype.getSize=function(){return this.size_},e.prototype.getStroke=function(){return this.stroke_},e.prototype.listenImageChange=function(t){},e.prototype.load=function(){},e.prototype.unlistenImageChange=function(t){},e.prototype.createRenderOptions=function(){var t,e=L.mb,i=L.rc,r=0,n=null,o=0,s=0;this.stroke_&&(t=this.stroke_.getColor(),null===t&&(t=L.Tx),t=R(t),s=this.stroke_.getWidth(),void 0===s&&(s=L.yC),n=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset(),i=this.stroke_.getLineJoin(),void 0===i&&(i=L.rc),e=this.stroke_.getLineCap(),void 0===e&&(e=L.mb),r=this.stroke_.getMiterLimit(),void 0===r&&(r=L.V4));var a=2*(this.radius_+s)+1;return{strokeStyle:t,strokeWidth:s,size:a,lineCap:e,lineDash:n,lineDashOffset:o,lineJoin:i,miterLimit:r}},e.prototype.render=function(){var t=this.createRenderOptions(),e=(0,w.E4)(t.size,t.size);this.draw_(t,e,0,0,1),this.canvas_[1]=e.canvas;var i=e.canvas.width,r=i,n=this.getDisplacement();this.hitDetectionImageSize_=[t.size,t.size],this.createHitDetectionCanvas_(t,1),this.anchor_=[i/2-n[0],i/2+n[1]],this.size_=[i,i],this.imageSize_=[r,r]},e.prototype.draw_=function(t,e,i,r,n){var o,s,a;e.setTransform(n,0,0,n,0,0),e.translate(i,r),e.beginPath();var h=this.points_;if(h===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var l=void 0!==this.radius2_?this.radius2_:this.radius_;for(l!==this.radius_&&(h*=2),o=0;o<=h;o++)s=2*o*Math.PI/h-Math.PI/2+this.angle_,a=o%2===0?this.radius_:l,e.lineTo(t.size/2+a*Math.cos(s),t.size/2+a*Math.sin(s))}if(this.fill_){var u=this.fill_.getColor();null===u&&(u=L.bL),e.fillStyle=R(u),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,e.setLineDash&&t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke()),e.closePath()},e.prototype.createHitDetectionCanvas_=function(t,e){if(this.hitDetectionCanvas_[e]=this.getImage(e),this.fill_){var i=this.fill_.getColor(),r=0;if("string"===typeof i&&(i=(0,C._2)(i)),null===i?r=1:Array.isArray(i)&&(r=4===i.length?i[3]:1),0===r){var n=(0,w.E4)(t.size*e,t.size*e);this.hitDetectionCanvas_[e]=n.canvas,this.drawHitDetectionCanvas_(t,n,0,0,e)}}},e.prototype.drawHitDetectionCanvas_=function(t,e,i,r,n){e.setTransform(n,0,0,n,0,0),e.translate(i,r),e.beginPath();var o=this.points_;if(o===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var s=void 0!==this.radius2_?this.radius2_:this.radius_;s!==this.radius_&&(o*=2);var a=void 0,h=void 0,l=void 0;for(a=0;a<=o;a++)l=2*a*Math.PI/o-Math.PI/2+this.angle_,h=a%2===0?this.radius_:s,e.lineTo(t.size/2+h*Math.cos(l),t.size/2+h*Math.sin(l))}e.fillStyle=L.bL,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.stroke()),e.closePath()},e}(O),F=D,b=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),M=function(t){function e(e){var i=this,r=e||{};return i=t.call(this,{points:1/0,fill:r.fill,radius:r.radius,stroke:r.stroke,displacement:void 0!==r.displacement?r.displacement:[0,0]})||this,i}return b(e,t),e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),displacement:this.getDisplacement().slice()});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.setRadius=function(t){this.radius_=t,this.render()},e}(F),A=M,G=function(){function t(t){var e=t||{};this.color_=void 0!==e.color?e.color:null}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0})},t.prototype.getColor=function(){return this.color_},t.prototype.setColor=function(t){this.color_=t},t}(),P=G,N=function(){function t(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},t.prototype.getColor=function(){return this.color_},t.prototype.getLineCap=function(){return this.lineCap_},t.prototype.getLineDash=function(){return this.lineDash_},t.prototype.getLineDashOffset=function(){return this.lineDashOffset_},t.prototype.getLineJoin=function(){return this.lineJoin_},t.prototype.getMiterLimit=function(){return this.miterLimit_},t.prototype.getWidth=function(){return this.width_},t.prototype.setColor=function(t){this.color_=t},t.prototype.setLineCap=function(t){this.lineCap_=t},t.prototype.setLineDash=function(t){this.lineDash_=t},t.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t},t.prototype.setLineJoin=function(t){this.lineJoin_=t},t.prototype.setMiterLimit=function(t){this.miterLimit_=t},t.prototype.setWidth=function(t){this.width_=t},t}(),B=N,W=function(){function t(t){var e=t||{};this.geometry_=null,this.geometryFunction_=z,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex}return t.prototype.clone=function(){var e=this.getGeometry();return e&&"object"===typeof e&&(e=e.clone()),new t({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},t.prototype.getRenderer=function(){return this.renderer_},t.prototype.setRenderer=function(t){this.renderer_=t},t.prototype.getGeometry=function(){return this.geometry_},t.prototype.getGeometryFunction=function(){return this.geometryFunction_},t.prototype.getFill=function(){return this.fill_},t.prototype.setFill=function(t){this.fill_=t},t.prototype.getImage=function(){return this.image_},t.prototype.setImage=function(t){this.image_=t},t.prototype.getStroke=function(){return this.stroke_},t.prototype.setStroke=function(t){this.stroke_=t},t.prototype.getText=function(){return this.text_},t.prototype.setText=function(t){this.text_=t},t.prototype.getZIndex=function(){return this.zIndex_},t.prototype.setGeometry=function(t){"function"===typeof t?this.geometryFunction_=t:"string"===typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=z,this.geometry_=t},t.prototype.setZIndex=function(t){this.zIndex_=t},t}();function Y(t){var e;if("function"===typeof t)e=t;else{var i;if(Array.isArray(t))i=t;else{(0,f.h)("function"===typeof t.getZIndex,41);var r=t;i=[r]}e=function(){return i}}return e}var X=null;function Z(t,e){if(!X){var i=new P({color:"rgba(255,255,255,0.4)"}),r=new B({color:"#3399CC",width:1.25});X=[new W({image:new A({fill:i,stroke:r,radius:5}),fill:i,stroke:r})]}return X}function z(t){return t.getGeometry()}var H=W,U=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),K={RENDER_ORDER:"renderOrder"},V=function(t){function e(e){var i=this,r=e||{},n=(0,x.f0)({},r);return delete n.style,delete n.renderBuffer,delete n.updateWhileAnimating,delete n.updateWhileInteracting,i=t.call(this,n)||this,i.declutter_=void 0!==r.declutter&&r.declutter,i.renderBuffer_=void 0!==r.renderBuffer?r.renderBuffer:100,i.style_=null,i.styleFunction_=void 0,i.setStyle(r.style),i.updateWhileAnimating_=void 0!==r.updateWhileAnimating&&r.updateWhileAnimating,i.updateWhileInteracting_=void 0!==r.updateWhileInteracting&&r.updateWhileInteracting,i}return U(e,t),e.prototype.getDeclutter=function(){return this.declutter_},e.prototype.getFeatures=function(e){return t.prototype.getFeatures.call(this,e)},e.prototype.getRenderBuffer=function(){return this.renderBuffer_},e.prototype.getRenderOrder=function(){return this.get(K.RENDER_ORDER)},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},e.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},e.prototype.setRenderOrder=function(t){this.set(K.RENDER_ORDER,t)},e.prototype.setStyle=function(t){this.style_=void 0!==t?t:Z,this.styleFunction_=null===t?void 0:Y(this.style_),this.changed()},e}(m.Z),J=V,j=(i(57658),{BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12}),q=[j.FILL],$=[j.STROKE],Q=[j.BEGIN_PATH],tt=[j.CLOSE_PATH],et=j,it=i(788),rt=i(64982),nt=function(){function t(){}return t.prototype.drawCustom=function(t,e,i){},t.prototype.drawGeometry=function(t){},t.prototype.setStyle=function(t){},t.prototype.drawCircle=function(t,e){},t.prototype.drawFeature=function(t,e){},t.prototype.drawGeometryCollection=function(t,e){},t.prototype.drawLineString=function(t,e){},t.prototype.drawMultiLineString=function(t,e){},t.prototype.drawMultiPoint=function(t,e){},t.prototype.drawMultiPolygon=function(t,e){},t.prototype.drawPoint=function(t,e){},t.prototype.drawPolygon=function(t,e){},t.prototype.drawText=function(t,e){},t.prototype.setFillStrokeStyle=function(t,e){},t.prototype.setImageStyle=function(t,e){},t.prototype.setTextStyle=function(t,e){},t}(),ot=nt,st=i(63220),at=i(15139),ht=i(40165),lt=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ut=function(t){function e(e,i,r,n){var o=t.call(this)||this;return o.tolerance=e,o.maxExtent=i,o.pixelRatio=n,o.maxLineWidth=0,o.resolution=r,o.beginGeometryInstruction1_=null,o.beginGeometryInstruction2_=null,o.bufferedMaxExtent_=null,o.instructions=[],o.coordinates=[],o.tmpCoordinate_=[],o.hitDetectionInstructions=[],o.state={},o}return lt(e,t),e.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map((function(t){return t*e}))},e.prototype.appendFlatCoordinates=function(t,e,i,r,n,o){var s=this.coordinates.length,a=this.getBufferedMaxExtent();o&&(e+=r);var h,l,u,c=t[e],f=t[e+1],p=this.tmpCoordinate_,d=!0;for(h=e+r;h<i;h+=r)p[0]=t[h],p[1]=t[h+1],u=(0,st.pX)(a,p),u!==l?(d&&(this.coordinates[s++]=c,this.coordinates[s++]=f),this.coordinates[s++]=p[0],this.coordinates[s++]=p[1],d=!1):u===rt.Z.INTERSECTING?(this.coordinates[s++]=p[0],this.coordinates[s++]=p[1],d=!1):d=!0,c=p[0],f=p[1],l=u;return(n&&d||h===e+r)&&(this.coordinates[s++]=c,this.coordinates[s++]=f),s},e.prototype.drawCustomCoordinates_=function(t,e,i,r,n){for(var o=0,s=i.length;o<s;++o){var a=i[o],h=this.appendFlatCoordinates(t,e,a,r,!1,!1);n.push(h),e=a}return e},e.prototype.drawCustom=function(t,e,i){this.beginGeometry(t,e);var r,n,o,s,a,h=t.getType(),l=t.getStride(),u=this.coordinates.length;if(h==it.Z.MULTI_POLYGON){r=t.getOrientedFlatCoordinates(),s=[];var c=t.getEndss();a=0;for(var f=0,p=c.length;f<p;++f){var d=[];a=this.drawCustomCoordinates_(r,a,c[f],l,d),s.push(d)}this.instructions.push([et.CUSTOM,u,s,t,i,ht.ug])}else h==it.Z.POLYGON||h==it.Z.MULTI_LINE_STRING?(o=[],r=h==it.Z.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),a=this.drawCustomCoordinates_(r,0,t.getEnds(),l,o),this.instructions.push([et.CUSTOM,u,o,t,i,ht.o1])):h==it.Z.LINE_STRING||h==it.Z.MULTI_POINT?(r=t.getFlatCoordinates(),n=this.appendFlatCoordinates(r,0,r.length,l,!1,!1),this.instructions.push([et.CUSTOM,u,n,t,i,ht.Ml])):h==it.Z.POINT&&(r=t.getFlatCoordinates(),this.coordinates.push(r[0],r[1]),n=this.coordinates.length,this.instructions.push([et.CUSTOM,u,n,t,i]));this.endGeometry(e)},e.prototype.beginGeometry=function(t,e){var i=t.getExtent();this.beginGeometryInstruction1_=[et.BEGIN_GEOMETRY,e,0,i],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[et.BEGIN_GEOMETRY,e,0,i],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},e.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},e.prototype.reverseHitDetectionInstructions=function(){var t,e=this.hitDetectionInstructions;e.reverse();var i,r,n=e.length,o=-1;for(t=0;t<n;++t)i=e[t],r=i[0],r==et.END_GEOMETRY?o=t:r==et.BEGIN_GEOMETRY&&(i[2]=t,(0,at.FZ)(this.hitDetectionInstructions,o,t),o=-1)},e.prototype.setFillStrokeStyle=function(t,e){var i=this.state;if(t){var r=t.getColor();i.fillStyle=R(r||L.bL)}else i.fillStyle=void 0;if(e){var n=e.getColor();i.strokeStyle=R(n||L.Tx);var o=e.getLineCap();i.lineCap=void 0!==o?o:L.mb;var s=e.getLineDash();i.lineDash=s?s.slice():L.X9;var a=e.getLineDashOffset();i.lineDashOffset=a||L.He;var h=e.getLineJoin();i.lineJoin=void 0!==h?h:L.rc;var l=e.getWidth();i.lineWidth=void 0!==l?l:L.yC;var u=e.getMiterLimit();i.miterLimit=void 0!==u?u:L.V4,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0},e.prototype.createFill=function(t){var e=t.fillStyle,i=[et.SET_FILL_STYLE,e];return"string"!==typeof e&&i.push(!0),i},e.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},e.prototype.createStroke=function(t){return[et.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},e.prototype.updateFillStyle=function(t,e){var i=t.fillStyle;"string"===typeof i&&t.currentFillStyle==i||(void 0!==i&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)},e.prototype.updateStrokeStyle=function(t,e){var i=t.strokeStyle,r=t.lineCap,n=t.lineDash,o=t.lineDashOffset,s=t.lineJoin,a=t.lineWidth,h=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=r||n!=t.currentLineDash&&!(0,at.fS)(t.currentLineDash,n)||t.currentLineDashOffset!=o||t.currentLineJoin!=s||t.currentLineWidth!=a||t.currentMiterLimit!=h)&&(void 0!==i&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=r,t.currentLineDash=n,t.currentLineDashOffset=o,t.currentLineJoin=s,t.currentLineWidth=a,t.currentMiterLimit=h)},e.prototype.endGeometry=function(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var e=[et.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)},e.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,st.d9)(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;(0,st.f3)(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},e}(ot),ct=ut,ft=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),pt=function(t){function e(e,i,r,n){var o=t.call(this,e,i,r,n)||this;return o.declutterGroups_=null,o.hitDetectionImage_=null,o.image_=null,o.imagePixelRatio_=void 0,o.anchorX_=void 0,o.anchorY_=void 0,o.height_=void 0,o.opacity_=void 0,o.originX_=void 0,o.originY_=void 0,o.rotateWithView_=void 0,o.rotation_=void 0,o.scale_=void 0,o.width_=void 0,o}return ft(e,t),e.prototype.drawCoordinates_=function(t,e,i,r){return this.appendFlatCoordinates(t,e,i,r,!1,!1)},e.prototype.drawPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var i=t.getFlatCoordinates(),r=t.getStride(),n=this.coordinates.length,o=this.drawCoordinates_(i,0,i.length,r);this.instructions.push([et.DRAW_IMAGE,n,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,this.declutterGroups_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_)]),this.hitDetectionInstructions.push([et.DRAW_IMAGE,n,o,this.hitDetectionImage_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,this.declutterGroups_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_)]),this.endGeometry(e)}},e.prototype.drawMultiPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var i=t.getFlatCoordinates(),r=t.getStride(),n=this.coordinates.length,o=this.drawCoordinates_(i,0,i.length,r);this.instructions.push([et.DRAW_IMAGE,n,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,this.declutterGroups_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_)]),this.hitDetectionInstructions.push([et.DRAW_IMAGE,n,o,this.hitDetectionImage_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,this.declutterGroups_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_)]),this.endGeometry(e)}},e.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,t.prototype.finish.call(this)},e.prototype.setImageStyle=function(t,e){var i=t.getAnchor(),r=t.getSize(),n=t.getHitDetectionImage(this.pixelRatio),o=t.getImage(this.pixelRatio),s=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.declutterGroups_=e,this.hitDetectionImage_=n,this.image_=o,this.height_=r[1],this.opacity_=t.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=r[0]},e}(ct),dt=pt,_t=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),gt=function(t){function e(e,i,r,n){return t.call(this,e,i,r,n)||this}return _t(e,t),e.prototype.drawFlatCoordinates_=function(t,e,i,r){var n=this.coordinates.length,o=this.appendFlatCoordinates(t,e,i,r,!1,!1),s=[et.MOVE_TO_LINE_TO,n,o];return this.instructions.push(s),this.hitDetectionInstructions.push(s),i},e.prototype.drawLineString=function(t,e){var i=this.state,r=i.strokeStyle,n=i.lineWidth;if(void 0!==r&&void 0!==n){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([et.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],Q);var o=t.getFlatCoordinates(),s=t.getStride();this.drawFlatCoordinates_(o,0,o.length,s),this.hitDetectionInstructions.push($),this.endGeometry(e)}},e.prototype.drawMultiLineString=function(t,e){var i=this.state,r=i.strokeStyle,n=i.lineWidth;if(void 0!==r&&void 0!==n){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([et.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],Q);for(var o=t.getEnds(),s=t.getFlatCoordinates(),a=t.getStride(),h=0,l=0,u=o.length;l<u;++l)h=this.drawFlatCoordinates_(s,h,o[l],a);this.hitDetectionInstructions.push($),this.endGeometry(e)}},e.prototype.finish=function(){var e=this.state;return void 0!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&this.instructions.push($),this.reverseHitDetectionInstructions(),this.state=null,t.prototype.finish.call(this)},e.prototype.applyStroke=function(e){void 0!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push($),e.lastStroke=this.coordinates.length),e.lastStroke=0,t.prototype.applyStroke.call(this,e),this.instructions.push(Q)},e}(ct),yt=gt,vt=i(21712),mt=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),xt=function(t){function e(e,i,r,n){return t.call(this,e,i,r,n)||this}return mt(e,t),e.prototype.drawFlatCoordinatess_=function(t,e,i,r){var n=this.state,o=void 0!==n.fillStyle,s=void 0!==n.strokeStyle,a=i.length;this.instructions.push(Q),this.hitDetectionInstructions.push(Q);for(var h=0;h<a;++h){var l=i[h],u=this.coordinates.length,c=this.appendFlatCoordinates(t,e,l,r,!0,!s),f=[et.MOVE_TO_LINE_TO,u,c];this.instructions.push(f),this.hitDetectionInstructions.push(f),s&&(this.instructions.push(tt),this.hitDetectionInstructions.push(tt)),e=l}return o&&(this.instructions.push(q),this.hitDetectionInstructions.push(q)),s&&(this.instructions.push($),this.hitDetectionInstructions.push($)),e},e.prototype.drawCircle=function(t,e){var i=this.state,r=i.fillStyle,n=i.strokeStyle;if(void 0!==r||void 0!==n){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([et.SET_FILL_STYLE,L.bL]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([et.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var o=t.getFlatCoordinates(),s=t.getStride(),a=this.coordinates.length;this.appendFlatCoordinates(o,0,o.length,s,!1,!1);var h=[et.CIRCLE,a];this.instructions.push(Q,h),this.hitDetectionInstructions.push(Q,h),void 0!==i.fillStyle&&(this.instructions.push(q),this.hitDetectionInstructions.push(q)),void 0!==i.strokeStyle&&(this.instructions.push($),this.hitDetectionInstructions.push($)),this.endGeometry(e)}},e.prototype.drawPolygon=function(t,e){var i=this.state,r=i.fillStyle,n=i.strokeStyle;if(void 0!==r||void 0!==n){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([et.SET_FILL_STYLE,L.bL]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([et.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var o=t.getEnds(),s=t.getOrientedFlatCoordinates(),a=t.getStride();this.drawFlatCoordinatess_(s,0,o,a),this.endGeometry(e)}},e.prototype.drawMultiPolygon=function(t,e){var i=this.state,r=i.fillStyle,n=i.strokeStyle;if(void 0!==r||void 0!==n){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([et.SET_FILL_STYLE,L.bL]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([et.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);for(var o=t.getEndss(),s=t.getOrientedFlatCoordinates(),a=t.getStride(),h=0,l=0,u=o.length;l<u;++l)h=this.drawFlatCoordinatess_(s,h,o[l],a);this.endGeometry(e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var e=this.tolerance;if(0!==e)for(var i=this.coordinates,r=0,n=i.length;r<n;++r)i[r]=(0,vt.uZ)(i[r],e);return t.prototype.finish.call(this)},e.prototype.setFillStrokeStyles_=function(){var t=this.state,e=t.fillStyle;void 0!==e&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)},e}(ct),St=xt,It={POINT:"point",LINE:"line"};function Tt(t,e,i,r,n){var o,s,a,h,l,u,c,f,p,d,_=i,g=i,y=0,v=0,m=i;for(s=i;s<r;s+=n){var x=e[s],S=e[s+1];void 0!==l&&(p=x-l,d=S-u,h=Math.sqrt(p*p+d*d),void 0!==c&&(v+=a,o=Math.acos((c*p+f*d)/(a*h)),o>t&&(v>y&&(y=v,_=m,g=s),v=0,m=s-n)),a=h,c=p,f=d),l=x,u=S}return v+=h,v>y?[m,s]:[_,g]}var Et=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ot={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},Ct=function(t){function e(e,i,r,n){var o=t.call(this,e,i,r,n)||this;return o.declutterGroups_,o.labels_=null,o.text_="",o.textOffsetX_=0,o.textOffsetY_=0,o.textRotateWithView_=void 0,o.textRotation_=0,o.textFillState_=null,o.fillStates={},o.textStrokeState_=null,o.strokeStates={},o.textState_={},o.textStates={},o.textKey_="",o.fillKey_="",o.strokeKey_="",o}return Et(e,t),e.prototype.finish=function(){var e=t.prototype.finish.call(this);return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e},e.prototype.drawText=function(t,e){var i=this.textFillState_,r=this.textStrokeState_,n=this.textState_;if(""!==this.text_&&n&&(i||r)){var o,s,a=this.coordinates.length,h=t.getType(),l=null,u=2,c=2;if(n.placement===It.LINE){if(!(0,st.kK)(this.getBufferedMaxExtent(),t.getExtent()))return;var f=void 0;if(l=t.getFlatCoordinates(),c=t.getStride(),h==it.Z.LINE_STRING)f=[l.length];else if(h==it.Z.MULTI_LINE_STRING)f=t.getEnds();else if(h==it.Z.POLYGON)f=t.getEnds().slice(0,1);else if(h==it.Z.MULTI_POLYGON){var p=t.getEndss();for(f=[],o=0,s=p.length;o<s;++o)f.push(p[o][0])}this.beginGeometry(t,e);for(var d=n.textAlign,_=0,g=void 0,y=0,v=f.length;y<v;++y){if(void 0==d){var m=Tt(n.maxAngle,l,_,f[y],c);_=m[0],g=m[1]}else g=f[y];for(o=_;o<g;o+=c)this.coordinates.push(l[o],l[o+1]);u=this.coordinates.length,_=f[y];var x=this.declutterGroups_?0===y?this.declutterGroups_[0]:[].concat(this.declutterGroups_[0]):null;this.drawChars_(a,u,x),a=u}this.endGeometry(e)}else{var S=null;switch(n.overflow||(S=[]),h){case it.Z.POINT:case it.Z.MULTI_POINT:l=t.getFlatCoordinates(),u=l.length;break;case it.Z.LINE_STRING:l=t.getFlatMidpoint();break;case it.Z.CIRCLE:l=t.getCenter();break;case it.Z.MULTI_LINE_STRING:l=t.getFlatMidpoints(),u=l.length;break;case it.Z.POLYGON:l=t.getFlatInteriorPoint(),n.overflow||S.push(l[2]/this.resolution),c=3;break;case it.Z.MULTI_POLYGON:var I=t.getFlatInteriorPoints();for(l=[],o=0,s=I.length;o<s;o+=3)n.overflow||S.push(I[o+2]/this.resolution),l.push(I[o],I[o+1]);if(u=l.length,0==u)return;break;default:}u=this.appendFlatCoordinates(l,0,u,c,!1,!1),this.saveTextStates_(),(n.backgroundFill||n.backgroundStroke)&&(this.setFillStrokeStyle(n.backgroundFill,n.backgroundStroke),n.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),n.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);var T=n.padding;if(T!=L.oB&&(n.scale[0]<0||n.scale[1]<0)){var E=n.padding[0],O=n.padding[1],C=n.padding[2],R=n.padding[3];n.scale[0]<0&&(O=-O,R=-R),n.scale[1]<0&&(E=-E,C=-C),T=[E,O,C,R]}var w=this.pixelRatio;this.instructions.push([et.DRAW_IMAGE,a,u,null,NaN,NaN,this.declutterGroups_,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,T==L.oB?L.oB:T.map((function(t){return t*w})),!!n.backgroundFill,!!n.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,S]);var k=1/w;this.hitDetectionInstructions.push([et.DRAW_IMAGE,a,u,null,NaN,NaN,this.declutterGroups_,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[k,k],NaN,T,!!n.backgroundFill,!!n.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,S]),this.endGeometry(e)}}},e.prototype.saveTextStates_=function(){var t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,r=this.strokeKey_;t&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var n=this.textKey_;n in this.textStates||(this.textStates[n]={font:e.font,textAlign:e.textAlign||L.PH,textBaseline:e.textBaseline||L.ru,scale:e.scale});var o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))},e.prototype.drawChars_=function(t,e,i){var r=this.textStrokeState_,n=this.textState_,o=this.strokeKey_,s=this.textKey_,a=this.fillKey_;this.saveTextStates_();var h=this.pixelRatio,l=Ot[n.textBaseline],u=this.textOffsetY_*h,c=this.text_,f=r?r.lineWidth*Math.abs(n.scale[0])/2:0;this.instructions.push([et.DRAW_CHARS,t,e,l,i,n.overflow,a,n.maxAngle,h,u,o,f*h,c,s,1]),this.hitDetectionInstructions.push([et.DRAW_CHARS,t,e,l,i,n.overflow,a,n.maxAngle,1,u,o,f,c,s,1/h])},e.prototype.setTextStyle=function(t,e){var i,r,n;if(t){this.declutterGroups_=e;var o=t.getFill();o?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=R(o.getColor()||L.bL)):(r=null,this.textFillState_=r);var s=t.getStroke();if(s){n=this.textStrokeState_,n||(n={},this.textStrokeState_=n);var a=s.getLineDash(),h=s.getLineDashOffset(),l=s.getWidth(),u=s.getMiterLimit();n.lineCap=s.getLineCap()||L.mb,n.lineDash=a?a.slice():L.X9,n.lineDashOffset=void 0===h?L.He:h,n.lineJoin=s.getLineJoin()||L.rc,n.lineWidth=void 0===l?L.yC:l,n.miterLimit=void 0===u?L.V4:u,n.strokeStyle=R(s.getColor()||L.Tx)}else n=null,this.textStrokeState_=n;i=this.textState_;var c=t.getFont()||L.Df;(0,L.Qx)(c);var f=t.getScaleArray();i.overflow=t.getOverflow(),i.font=c,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.textBaseline=t.getTextBaseline()||L.ru,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||L.oB,i.scale=void 0===f?[1,1]:f;var p=t.getOffsetX(),d=t.getOffsetY(),_=t.getRotateWithView(),g=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===p?0:p,this.textOffsetY_=void 0===d?0:d,this.textRotateWithView_=void 0!==_&&_,this.textRotation_=void 0===g?0:g,this.strokeKey_=n?("string"==typeof n.strokeStyle?n.strokeStyle:(0,I.sq)(n.strokeStyle))+n.lineCap+n.lineDashOffset+"|"+n.lineWidth+n.lineJoin+n.miterLimit+"["+n.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.textBaseline||"?"),this.fillKey_=r?"string"==typeof r.fillStyle?r.fillStyle:"|"+(0,I.sq)(r.fillStyle):""}else this.text_=""},e}(ct),Rt=Ct,wt={Circle:St,Default:ct,Image:dt,LineString:yt,Polygon:St,Text:Rt},Lt=function(){function t(t,e,i,r,n){this.declutter_=n,this.declutterGroups_=null,this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=r,this.resolution_=i,this.buildersByZIndex_={}}return t.prototype.addDeclutter=function(t){var e=null;return this.declutter_&&(t?(e=this.declutterGroups_,e[0][0]++):(e=[[1]],this.declutterGroups_=e)),e},t.prototype.finish=function(){var t={};for(var e in this.buildersByZIndex_){t[e]=t[e]||{};var i=this.buildersByZIndex_[e];for(var r in i){var n=i[r].finish();t[e][r]=n}}return t},t.prototype.getBuilder=function(t,e){var i=void 0!==t?t.toString():"0",r=this.buildersByZIndex_[i];void 0===r&&(r={},this.buildersByZIndex_[i]=r);var n=r[e];if(void 0===n){var o=wt[e];n=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[e]=n}return n},t}(),kt=Lt,Dt=i(69117),Ft={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"},bt=i(30001),Mt=i.n(bt),At=i(44209),Gt=i(46597),Pt=i(66930),Nt=i(59166);function Bt(t,e,i,r,n,o,s,a,h,l,u,c){var f,p=[];if(c){var d=(0,Nt.U1)(t,e,i,r,c,[t[e],t[e+1]]);f=d[0]>d[d.length-r]}else f=t[e]>t[i-r];var _=n.length,g=t[e],y=t[e+1];e+=r;for(var v,m,x=t[e],S=t[e+1],I=0,T=Math.sqrt(Math.pow(x-g,2)+Math.pow(S-y,2)),E=!1,O=0;O<_;++O){v=f?_-O-1:O;var C=n[v],R=a*h(l,C,u),w=o+R/2;while(e<i-r&&I+T<w)g=x,y=S,e+=r,x=t[e],S=t[e+1],I+=T,T=Math.sqrt(Math.pow(x-g,2)+Math.pow(S-y,2));var L=w-I,k=Math.atan2(S-y,x-g);if(f&&(k+=k>0?-Math.PI:Math.PI),void 0!==m){var D=k-m;if(E=E||0!==D,D+=D>Math.PI?-2*Math.PI:D<-Math.PI?2*Math.PI:0,Math.abs(D)>s)return null}m=k;var F=L/T,b=(0,Pt.t7)(g,x,F),M=(0,Pt.t7)(y,S,F);p[v]=[b,M,R/2,k,C],o+=R}return E?p:[[p[0][0],p[0][1],p[0][2],p[0][3],n]]}function Wt(t,e,i,r){for(var n=t[e],o=t[e+1],s=0,a=e+r;a<i;a+=r){var h=t[a],l=t[a+1];s+=Math.sqrt((h-n)*(h-n)+(l-o)*(l-o)),n=h,o=l}return s}var Yt=(0,st.lJ)(),Xt=(0,Gt.Ue)(),Zt=[],zt=[],Ht=[],Ut=[],Kt=function(){function t(t,e,i,r,n){this.overlaps=i,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.declutterItems=[],this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderBuffer_=n,this.renderedTransform_=(0,Gt.Ue)(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={}}return t.prototype.createLabel=function(t,e,i,r){var n=t+e+i+r;if(this.labels_[n])return this.labels_[n];var o=r?this.strokeStates[r]:null,s=i?this.fillStates[i]:null,a=this.textStates[e],h=this.pixelRatio,l=[a.scale[0]*h,a.scale[1]*h],u=Ot[a.textAlign||L.PH],c=r&&o.lineWidth?o.lineWidth:0,f=t.split("\n"),p=f.length,d=[],_=(0,L.gs)(a.font,f,d),g=(0,L.fk)(a.font),y=g*p,v=_+c,m=[],x=(v+2)*l[0],S=(y+c)*l[1],I={width:x<0?Math.floor(x):Math.ceil(x),height:S<0?Math.floor(S):Math.ceil(S),contextInstructions:m};if(1==l[0]&&1==l[1]||m.push("scale",l),m.push("font",a.font),r){m.push("strokeStyle",o.strokeStyle),m.push("lineWidth",c),m.push("lineCap",o.lineCap),m.push("lineJoin",o.lineJoin),m.push("miterLimit",o.miterLimit);var T=At.Id?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D;T.prototype.setLineDash&&(m.push("setLineDash",[o.lineDash]),m.push("lineDashOffset",o.lineDashOffset))}i&&m.push("fillStyle",s.fillStyle),m.push("textBaseline","middle"),m.push("textAlign","center");var E,O=.5-u,C=u*v+O*c;if(r)for(E=0;E<p;++E)m.push("strokeText",[f[E],C+O*d[E],.5*(c+g)+E*g]);if(i)for(E=0;E<p;++E)m.push("fillText",[f[E],C+O*d[E],.5*(c+g)+E*g]);return this.labels_[n]=I,I},t.prototype.replayTextBackground_=function(t,e,i,r,n,o,s,a){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,r),t.lineTo.apply(t,n),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],a&&(t.fillStyle=o[1]),this.fill_(t)),s&&(this.setStrokeStyle_(t,s),t.stroke())},t.prototype.replayImageOrLabel_=function(t,e,i,r,n,o,s,a,h,l,u,c,f,p,d,_,g,y,v){var m=y||v;o*=p[0],s*=p[1],i-=o,r-=s;var x=_+u>n.width?n.width-u:_,S=h+c>n.height?n.height-c:h,I=g[3]+x*p[0]+g[1],T=g[0]+S*p[1]+g[2],E=i-g[3],O=r-g[0];(m||0!==f)&&(Zt[0]=E,Ut[0]=E,Zt[1]=O,zt[1]=O,zt[0]=E+I,Ht[0]=zt[0],Ht[1]=O+T,Ut[1]=Ht[1]);var C=null;if(0!==f){var R=i+o,w=r+s;C=(0,Gt.qC)(Xt,R,w,1,1,f,-R,-w),(0,Gt.nn)(Xt,Zt),(0,Gt.nn)(Xt,zt),(0,Gt.nn)(Xt,Ht),(0,Gt.nn)(Xt,Ut),(0,st.T9)(Math.min(Zt[0],zt[0],Ht[0],Ut[0]),Math.min(Zt[1],zt[1],Ht[1],Ut[1]),Math.max(Zt[0],zt[0],Ht[0],Ut[0]),Math.max(Zt[1],zt[1],Ht[1],Ut[1]),Yt)}else(0,st.T9)(E,O,E+I,O+T,Yt);this.renderBuffer_[0]=Math.max(this.renderBuffer_[0],(0,st.dz)(Yt)),this.renderBuffer_[1]=Math.max(this.renderBuffer_[1],(0,st.Cr)(Yt));var k=t.canvas,D=v?v[2]*p[0]/2:0,F=this.renderBuffer_,b=Yt[0]-D<=(k.width+F[0])/e&&Yt[2]+D>=-F[0]/e&&Yt[1]-D<=(k.height+F[1])/e&&Yt[3]+D>=-F[1]/e;if(d&&(i=Math.round(i),r=Math.round(r)),a){if(!b&&1==a[0])return!1;var M=b?[t,C?C.slice(0):null,l,n,u,c,x,S,i,r,p,Yt.slice()]:null;M&&(m&&M.push(y,v,Zt.slice(0),zt.slice(0),Ht.slice(0),Ut.slice(0)),a.push(M))}else b&&(m&&this.replayTextBackground_(t,Zt,zt,Ht,Ut,y,v,!1),(0,L._f)(t,C,l,n,u,c,x,S,i,r,p));return!0},t.prototype.fill_=function(t){if(this.alignFill_){var e=(0,Gt.nn)(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()},t.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.setLineDash&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},t.prototype.renderDeclutter=function(t,e,i,r){for(var n=[],o=1,s=t.length;o<s;++o){var a=t[o],h=a[11];n.push({minX:h[0],minY:h[1],maxX:h[2],maxY:h[3],value:e})}r||(r=new(Mt())(9));var l=!1;for(o=0,s=n.length;o<s;++o)if(r.collides(n[o])){l=!0;break}if(!l){r.load(n);for(var u=1,c=t.length;u<c;++u){a=t[u];var f=a[0],p=f.globalAlpha;p!==i&&(f.globalAlpha=i),a.length>12&&this.replayTextBackground_(a[0],a[14],a[15],a[16],a[17],a[12],a[13],!0),L._f.apply(void 0,a),p!==i&&(f.globalAlpha=p)}}return t.length=1,r},t.prototype.drawLabelWithPointPlacement_=function(t,e,i,r){var n=this.textStates[e],o=this.createLabel(t,e,r,i),s=this.strokeStates[i],a=this.pixelRatio,h=Ot[n.textAlign||L.PH],l=Ot[n.textBaseline||L.ru],u=s&&s.lineWidth?s.lineWidth:0,c=o.width/a-2*n.scale[0],f=h*c+2*(.5-h)*u,p=l*o.height/a+2*(.5-l)*u;return{label:o,anchorX:f,anchorY:p}},t.prototype.execute_=function(t,e,i,r,n,o,s){var a;this.declutterItems.length=0,this.pixelCoordinates_&&(0,at.fS)(i,this.renderedTransform_)?a=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),a=(0,Nt.vT)(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),(0,Gt.lk)(this.renderedTransform_,i));var h,l,u,c,f,p,d,_,g,y,v,m,x,S,I,T,E,O=0,C=r.length,R=0,w=0,k=0,D=null,F=null,b=this.coordinateCache_,M=this.viewRotation_,A=Math.round(1e12*Math.atan2(-i[1],i[0]))/1e12,G={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:M},P=this.instructions!=r||this.overlaps?0:200;while(O<C){var N=r[O],B=N[0];switch(B){case et.BEGIN_GEOMETRY:I=N[1],I.getGeometry()?void 0===s||(0,st.kK)(s,N[3])?++O:O=N[2]+1:O=N[2];break;case et.BEGIN_PATH:w>P&&(this.fill_(t),w=0),k>P&&(t.stroke(),k=0),w||k||(t.beginPath(),c=NaN,f=NaN),++O;break;case et.CIRCLE:R=N[1];var W=a[R],Y=a[R+1],X=a[R+2],Z=a[R+3],z=X-W,H=Z-Y,U=Math.sqrt(z*z+H*H);t.moveTo(W+U,Y),t.arc(W,Y,U,0,2*Math.PI,!0),++O;break;case et.CLOSE_PATH:t.closePath(),++O;break;case et.CUSTOM:R=N[1],h=N[2];var K=N[3],V=N[4],J=6==N.length?N[5]:void 0;G.geometry=K,G.feature=I,O in b||(b[O]=[]);var j=b[O];J?J(a,R,h,2,j):(j[0]=a[R],j[1]=a[R+1],j.length=2),V(j,G),++O;break;case et.DRAW_IMAGE:R=N[1],h=N[2],y=N[3],l=N[4],u=N[5],g=o?null:N[6];var q=N[7],$=N[8],Q=N[9],tt=N[10],it=N[11],rt=N[12],nt=N[13],ot=N[14];if(!y&&N.length>=19){v=N[18],m=N[19],x=N[20],S=N[21];var ht=this.drawLabelWithPointPlacement_(v,m,x,S);y=ht.label,N[3]=y;var lt=N[22];l=(ht.anchorX-lt)*this.pixelRatio,N[4]=l;var ut=N[23];u=(ht.anchorY-ut)*this.pixelRatio,N[5]=u,q=y.height,N[7]=q,ot=y.width,N[14]=ot}var ct=void 0;N.length>24&&(ct=N[24]);var ft=void 0,pt=void 0,dt=void 0;N.length>16?(ft=N[15],pt=N[16],dt=N[17]):(ft=L.oB,pt=!1,dt=!1),it&&A?rt+=M:it||A||(rt-=M);for(var _t=0,gt=0;R<h;R+=2)if(!(ct&&ct[_t++]<ot/this.pixelRatio)){if(g){var yt=Math.floor(gt);_=g.length<yt+1?[g[0][0]]:g[yt]}var vt=this.replayImageOrLabel_(t,e,a[R],a[R+1],y,l,u,_,q,$,Q,tt,rt,nt,n,ot,ft,pt?D:null,dt?F:null);vt&&_&&g[g.length-1]!==_&&g.push(_),_&&(_.length-1===_[0]&&this.declutterItems.push(this,_,I),gt+=1/_[0])}++O;break;case et.DRAW_CHARS:var mt=N[1],xt=N[2],St=N[3];_=o?null:N[4];var It=N[5];S=N[6];var Tt=N[7],Et=N[8],Ct=N[9];x=N[10];var Rt=N[11];v=N[12],m=N[13];var wt=[N[14],N[14]],Lt=this.textStates[m],kt=Lt.font,Dt=[Lt.scale[0]*Et,Lt.scale[1]*Et],Ft=void 0;kt in this.widths_?Ft=this.widths_[kt]:(Ft={},this.widths_[kt]=Ft);var bt=Wt(a,mt,xt,2),Mt=Math.abs(Dt[0])*(0,L.Kd)(kt,v,Ft);if(It||Mt<=bt){var At=this.textStates[m].textAlign,Pt=(bt-Mt)*Ot[At],Yt=Bt(a,mt,xt,2,v,Pt,Tt,Math.abs(Dt[0]),L.Kd,kt,Ft,A?0:this.viewRotation_);if(Yt){vt=!1;var Xt=void 0,Zt=void 0,zt=void 0,Ht=void 0,Ut=void 0;if(x)for(Xt=0,Zt=Yt.length;Xt<Zt;++Xt)Ut=Yt[Xt],zt=Ut[4],Ht=this.createLabel(zt,m,"",x),l=Ut[2]+Rt,u=St*Ht.height+2*(.5-St)*Rt*Dt[1]/Dt[0]-Ct,vt=this.replayImageOrLabel_(t,e,Ut[0],Ut[1],Ht,l,u,_,Ht.height,1,0,0,Ut[3],wt,!1,Ht.width,L.oB,null,null)||vt;if(S)for(Xt=0,Zt=Yt.length;Xt<Zt;++Xt)Ut=Yt[Xt],zt=Ut[4],Ht=this.createLabel(zt,m,S,""),l=Ut[2],u=St*Ht.height-Ct,vt=this.replayImageOrLabel_(t,e,Ut[0],Ut[1],Ht,l,u,_,Ht.height,1,0,0,Ut[3],wt,!1,Ht.width,L.oB,null,null)||vt;vt&&this.declutterItems.push(this,_,I)}}++O;break;case et.END_GEOMETRY:if(void 0!==o){I=N[1];var Kt=o(I);if(Kt)return Kt}++O;break;case et.FILL:P?w++:this.fill_(t),++O;break;case et.MOVE_TO_LINE_TO:for(R=N[1],h=N[2],T=a[R],E=a[R+1],p=T+.5|0,d=E+.5|0,p===c&&d===f||(t.moveTo(T,E),c=p,f=d),R+=2;R<h;R+=2)T=a[R],E=a[R+1],p=T+.5|0,d=E+.5|0,R!=h-2&&p===c&&d===f||(t.lineTo(T,E),c=p,f=d);++O;break;case et.SET_FILL_STYLE:D=N,this.alignFill_=N[2],w&&(this.fill_(t),w=0,k&&(t.stroke(),k=0)),t.fillStyle=N[1],++O;break;case et.SET_STROKE_STYLE:F=N,k&&(t.stroke(),k=0),this.setStrokeStyle_(t,N),++O;break;case et.STROKE:P?k++:t.stroke(),++O;break;default:++O;break}}w&&this.fill_(t),k&&t.stroke()},t.prototype.execute=function(t,e,i,r,n){this.viewRotation_=r,this.execute_(t,e,i,this.instructions,n,void 0,void 0)},t.prototype.executeHitDetection=function(t,e,i,r,n){return this.viewRotation_=i,this.execute_(t,1,e,this.hitDetectionInstructions,!0,r,n)},t}(),Vt=Kt,Jt=[Ft.POLYGON,Ft.CIRCLE,Ft.LINE_STRING,Ft.IMAGE,Ft.TEXT,Ft.DEFAULT],jt=function(){function t(t,e,i,r,n,o){this.maxExtent_=t,this.overlaps_=r,this.pixelRatio_=i,this.resolution_=e,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=(0,Gt.Ue)(),this.createExecutors_(n)}return t.prototype.clip=function(t,e){var i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()},t.prototype.createExecutors_=function(t){for(var e in t){var i=this.executorsByZIndex_[e];void 0===i&&(i={},this.executorsByZIndex_[e]=i);var r=t[e],n=[this.renderBuffer_||0,this.renderBuffer_||0];for(var o in r){var s=r[o];i[o]=new Vt(this.resolution_,this.pixelRatio_,this.overlaps_,s,n)}}},t.prototype.hasExecutors=function(t){for(var e in this.executorsByZIndex_)for(var i=this.executorsByZIndex_[e],r=0,n=t.length;r<n;++r)if(t[r]in i)return!0;return!1},t.prototype.forEachFeatureAtCoordinate=function(t,e,i,r,n,o){r=Math.round(r);var s=2*r+1,a=(0,Gt.qC)(this.hitDetectionTransform_,r+.5,r+.5,1/e,-1/e,-i,-t[0],-t[1]);this.hitDetectionContext_||(this.hitDetectionContext_=(0,w.E4)(s,s));var h,l=this.hitDetectionContext_;l.canvas.width!==s||l.canvas.height!==s?(l.canvas.width=s,l.canvas.height=s):l.clearRect(0,0,s,s),void 0!==this.renderBuffer_&&(h=(0,st.lJ)(),(0,st.Wj)(h,t),(0,st.f3)(h,e*(this.renderBuffer_+r),h));var u,c=Qt(r);function f(t){for(var e=l.getImageData(0,0,s,s).data,i=0;i<s;i++)for(var r=0;r<s;r++)if(c[i][r]&&e[4*(r*s+i)+3]>0){var a=void 0;return(!o||u!=Ft.IMAGE&&u!=Ft.TEXT||-1!==o.indexOf(t))&&(a=n(t)),a||void l.clearRect(0,0,s,s)}}var p,d,_,g,y,v=Object.keys(this.executorsByZIndex_).map(Number);for(v.sort(at.kK),p=v.length-1;p>=0;--p){var m=v[p].toString();for(_=this.executorsByZIndex_[m],d=Jt.length-1;d>=0;--d)if(u=Jt[d],g=_[u],void 0!==g&&(y=g.executeHitDetection(l,a,i,f,h),y))return y}},t.prototype.getClipCoords=function(t){var e=this.maxExtent_;if(!e)return null;var i=e[0],r=e[1],n=e[2],o=e[3],s=[i,r,i,o,n,o,n,r];return(0,Nt.vT)(s,0,8,2,t,s),s},t.prototype.isEmpty=function(){return(0,x.xb)(this.executorsByZIndex_)},t.prototype.execute=function(t,e,i,r,n,o,s){var a=Object.keys(this.executorsByZIndex_).map(Number);a.sort(at.kK),this.maxExtent_&&(t.save(),this.clip(t,i));var h,l,u,c,f,p,d=o||Jt;for(h=0,l=a.length;h<l;++h){var _=a[h].toString();for(f=this.executorsByZIndex_[_],u=0,c=d.length;u<c;++u){var g=d[u];if(p=f[g],void 0!==p)if(!s||g!=Ft.IMAGE&&g!=Ft.TEXT)p.execute(t,e,i,r,n);else{var y=s[_];y?y.push(p,i.slice(0)):s[_]=[p,i.slice(0)]}}}this.maxExtent_&&t.restore()},t}(),qt={0:[[!0]]};function $t(t,e,i){var r,n=Math.floor(t.length/2);if(e>=n)for(r=n;r<e;r++)t[r][i]=!0;else if(e<n)for(r=e+1;r<n;r++)t[r][i]=!0}function Qt(t){if(void 0!==qt[t])return qt[t];for(var e=2*t+1,i=new Array(e),r=0;r<e;r++)i[r]=new Array(e);var n=t,o=0,s=0;while(n>=o)$t(i,t+n,t+o),$t(i,t+o,t+n),$t(i,t-o,t+n),$t(i,t-n,t+o),$t(i,t-n,t-o),$t(i,t-o,t-n),$t(i,t+o,t-n),$t(i,t+n,t-o),o++,s+=1+2*o,2*(s-n)+1>0&&(n-=1,s+=1-2*n);return qt[t]=i,i}function te(t,e,i,r,n,o){for(var s=Object.keys(t).map(Number).sort(at.kK),a=0,h=s.length;a<h;++a)for(var l=t[s[a].toString()],u=void 0,c=0,f=l.length;c<f;){var p=l[c++],d=l[c++];p.execute(e,1,d,i,n),p!==u&&p.declutterItems.length>0&&(u=p,o.push({items:p.declutterItems,opacity:r}))}}var ee=jt,ie=i(5726),re=i(68830),ne=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),oe=function(t){function e(e,i,r,n,o,s,a){var h=t.call(this)||this;return h.context_=e,h.pixelRatio_=i,h.extent_=r,h.transform_=n,h.viewRotation_=o,h.squaredTolerance_=s,h.userTransform_=a,h.contextFillState_=null,h.contextStrokeState_=null,h.contextTextState_=null,h.fillState_=null,h.strokeState_=null,h.image_=null,h.imageAnchorX_=0,h.imageAnchorY_=0,h.imageHeight_=0,h.imageOpacity_=0,h.imageOriginX_=0,h.imageOriginY_=0,h.imageRotateWithView_=!1,h.imageRotation_=0,h.imageScale_=[0,0],h.imageWidth_=0,h.text_="",h.textOffsetX_=0,h.textOffsetY_=0,h.textRotateWithView_=!1,h.textRotation_=0,h.textScale_=[0,0],h.textFillState_=null,h.textStrokeState_=null,h.textState_=null,h.pixelCoordinates_=[],h.tmpLocalTransform_=(0,Gt.Ue)(),h}return ne(e,t),e.prototype.drawImages_=function(t,e,i,r){if(this.image_){var n=(0,Nt.vT)(t,e,i,2,this.transform_,this.pixelCoordinates_),o=this.context_,s=this.tmpLocalTransform_,a=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=a*this.imageOpacity_);var h=this.imageRotation_;this.imageRotateWithView_&&(h+=this.viewRotation_);for(var l=0,u=n.length;l<u;l+=2){var c=n[l]-this.imageAnchorX_,f=n[l+1]-this.imageAnchorY_;if(0!==h||1!=this.imageScale_[0]||1!=this.imageScale_[1]){var p=c+this.imageAnchorX_,d=f+this.imageAnchorY_;(0,Gt.qC)(s,p,d,1,1,h,-p,-d),o.setTransform.apply(o,s),o.translate(p,d),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.setTransform(1,0,0,1,0,0)}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,c,f,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(o.globalAlpha=a)}},e.prototype.drawText_=function(t,e,i,r){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var n=(0,Nt.vT)(t,e,i,r,this.transform_,this.pixelCoordinates_),o=this.context_,s=this.textRotation_;for(this.textRotateWithView_&&(s+=this.viewRotation_);e<i;e+=r){var a=n[e]+this.textOffsetX_,h=n[e+1]+this.textOffsetY_;if(0!==s||1!=this.textScale_[0]||1!=this.textScale_[1]){var l=(0,Gt.qC)(this.tmpLocalTransform_,a,h,1,1,s,-a,-h);o.setTransform.apply(o,l),o.translate(a,h),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.setTransform(1,0,0,1,0,0)}else this.textStrokeState_&&o.strokeText(this.text_,a,h),this.textFillState_&&o.fillText(this.text_,a,h)}}},e.prototype.moveToLineTo_=function(t,e,i,r,n){var o=this.context_,s=(0,Nt.vT)(t,e,i,r,this.transform_,this.pixelCoordinates_);o.moveTo(s[0],s[1]);var a=s.length;n&&(a-=2);for(var h=2;h<a;h+=2)o.lineTo(s[h],s[h+1]);return n&&o.closePath(),i},e.prototype.drawRings_=function(t,e,i,r){for(var n=0,o=i.length;n<o;++n)e=this.moveToLineTo_(t,e,i[n],r,!0);return e},e.prototype.drawCircle=function(t){if((0,st.kK)(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=(0,re.Kr)(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],r=e[3]-e[1],n=Math.sqrt(i*i+r*r),o=this.context_;o.beginPath(),o.arc(e[0],e[1],n,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.setTransform=function(t){this.transform_=t},e.prototype.drawGeometry=function(t){var e=t.getType();switch(e){case it.Z.POINT:this.drawPoint(t);break;case it.Z.LINE_STRING:this.drawLineString(t);break;case it.Z.POLYGON:this.drawPolygon(t);break;case it.Z.MULTI_POINT:this.drawMultiPoint(t);break;case it.Z.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case it.Z.MULTI_POLYGON:this.drawMultiPolygon(t);break;case it.Z.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case it.Z.CIRCLE:this.drawCircle(t);break;default:}},e.prototype.drawFeature=function(t,e){var i=e.getGeometryFunction()(t);i&&(0,st.kK)(this.extent_,i.getExtent())&&(this.setStyle(e),this.drawGeometry(i))},e.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),i=0,r=e.length;i<r;++i)this.drawGeometry(e[i])},e.prototype.drawPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},e.prototype.drawMultiPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},e.prototype.drawLineString=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,st.kK)(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var r=t.getFlatMidpoint();this.drawText_(r,0,2,2)}}},e.prototype.drawMultiLineString=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getExtent();if((0,st.kK)(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i=this.context_,r=t.getFlatCoordinates(),n=0,o=t.getEnds(),s=t.getStride();i.beginPath();for(var a=0,h=o.length;a<h;++a)n=this.moveToLineTo_(r,n,o[a],s,!1);i.stroke()}if(""!==this.text_){var l=t.getFlatMidpoints();this.drawText_(l,0,l.length,2)}}},e.prototype.drawPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,st.kK)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var i=t.getFlatInteriorPoint();this.drawText_(i,0,2,2)}}},e.prototype.drawMultiPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,st.kK)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getOrientedFlatCoordinates(),r=0,n=t.getEndss(),o=t.getStride();e.beginPath();for(var s=0,a=n.length;s<a;++s){var h=n[s];r=this.drawRings_(i,r,h,o)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var l=t.getFlatInteriorPoints();this.drawText_(l,0,l.length,2)}}},e.prototype.setContextFillState_=function(t){var e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},e.prototype.setContextStrokeState_=function(t){var e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,e.lineCap=t.lineCap),e.setLineDash&&((0,at.fS)(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset)),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},e.prototype.setContextTextState_=function(t){var e=this.context_,i=this.contextTextState_,r=t.textAlign?t.textAlign:L.PH;i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=r&&(i.textAlign=r,e.textAlign=r),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=r,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:r,textBaseline:t.textBaseline})},e.prototype.setFillStrokeStyle=function(t,e){if(t){var i=t.getColor();this.fillState_={fillStyle:R(i||L.bL)}}else this.fillState_=null;if(e){var r=e.getColor(),n=e.getLineCap(),o=e.getLineDash(),s=e.getLineDashOffset(),a=e.getLineJoin(),h=e.getWidth(),l=e.getMiterLimit();this.strokeState_={lineCap:void 0!==n?n:L.mb,lineDash:o||L.X9,lineDashOffset:s||L.He,lineJoin:void 0!==a?a:L.rc,lineWidth:this.pixelRatio_*(void 0!==h?h:L.yC),miterLimit:void 0!==l?l:L.V4,strokeStyle:R(r||L.Tx)}}else this.strokeState_=null},e.prototype.setImageStyle=function(t){if(t){var e=t.getSize();if(e){var i=t.getAnchor(),r=t.getImage(1),n=t.getOrigin(),o=t.getScaleArray();this.imageAnchorX_=i[0],this.imageAnchorY_=i[1],this.imageHeight_=e[1],this.image_=r,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=n[0],this.imageOriginY_=n[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=[this.pixelRatio_*o[0],this.pixelRatio_*o[1]],this.imageWidth_=e[0]}else this.image_=null}else this.image_=null},e.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var i=e.getColor();this.textFillState_={fillStyle:R(i||L.bL)}}else this.textFillState_=null;var r=t.getStroke();if(r){var n=r.getColor(),o=r.getLineCap(),s=r.getLineDash(),a=r.getLineDashOffset(),h=r.getLineJoin(),l=r.getWidth(),u=r.getMiterLimit();this.textStrokeState_={lineCap:void 0!==o?o:L.mb,lineDash:s||L.X9,lineDashOffset:a||L.He,lineJoin:void 0!==h?h:L.rc,lineWidth:void 0!==l?l:L.yC,miterLimit:void 0!==u?u:L.V4,strokeStyle:R(n||L.Tx)}}else this.textStrokeState_=null;var c=t.getFont(),f=t.getOffsetX(),p=t.getOffsetY(),d=t.getRotateWithView(),_=t.getRotation(),g=t.getScaleArray(),y=t.getText(),v=t.getTextAlign(),m=t.getTextBaseline();this.textState_={font:void 0!==c?c:L.Df,textAlign:void 0!==v?v:L.PH,textBaseline:void 0!==m?m:L.ru},this.text_=void 0!==y?y:"",this.textOffsetX_=void 0!==f?this.pixelRatio_*f:0,this.textOffsetY_=void 0!==p?this.pixelRatio_*p:0,this.textRotateWithView_=void 0!==d&&d,this.textRotation_=void 0!==_?_:0,this.textScale_=[this.pixelRatio_*g[0],this.pixelRatio_*g[1]]}else this.text_=""},e}(ot),se=oe,ae={FRACTION:"fraction",PIXELS:"pixels"},he={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},le=i(32937),ue=i(86532),ce=i(37208),fe=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),pe=null,de=function(t){function e(e,i,r,n,o,s){var a=t.call(this)||this;return a.hitDetectionImage_={},a.image_=e||new Image,null!==n&&(a.image_.crossOrigin=n),a.canvas_={},a.color_=s,a.unlisten_=null,a.imageState_=o,a.size_=r,a.src_=i,a.tainted_,a}return fe(e,t),e.prototype.isTainted_=function(){if(void 0===this.tainted_&&this.imageState_===S.Z.LOADED){pe||(pe=(0,w.E4)(1,1)),pe.drawImage(this.image_,0,0);try{pe.getImageData(0,0,1,1),this.tainted_=!1}catch(t){pe=null,this.tainted_=!0}}return!0===this.tainted_},e.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(c.Z.CHANGE)},e.prototype.handleImageError_=function(){this.imageState_=S.Z.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.handleImageLoad_=function(){this.imageState_=S.Z.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.getImage=function(t){return this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_},e.prototype.getPixelRatio=function(t){return this.replaceColor_(t),this.canvas_[t]?t:1},e.prototype.getImageState=function(){return this.imageState_},e.prototype.getHitDetectionImage=function(t){if(!this.hitDetectionImage_[t])if(this.isTainted_()){var e=this.color_?t:1,i=this.size_[0],r=this.size_[1],n=(0,w.E4)(Math.ceil(i*e),Math.ceil(r*e));n.scale(e,e),n.fillRect(0,0,i,r),this.hitDetectionImage_[t]=n.canvas}else this.hitDetectionImage_[t]=this.image_;return this.hitDetectionImage_[t]},e.prototype.getSize=function(){return this.size_},e.prototype.getSrc=function(){return this.src_},e.prototype.load=function(){if(this.imageState_==S.Z.IDLE){this.imageState_=S.Z.LOADING;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=(0,ce.K)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},e.prototype.replaceColor_=function(t){if(this.color_&&!this.canvas_[t]){var e=document.createElement("canvas");this.canvas_[t]=e,e.width=Math.ceil(this.image_.width*t),e.height=Math.ceil(this.image_.height*t);var i=e.getContext("2d");if(i.scale(t,t),i.drawImage(this.image_,0,0),this.isTainted_()){var r=this.color_;return i.globalCompositeOperation="multiply",i.fillStyle="rgb("+r[0]+","+r[1]+","+r[2]+")",i.fillRect(0,0,e.width,e.height),i.globalCompositeOperation="destination-in",void i.drawImage(this.image_,0,0)}for(var n=i.getImageData(0,0,e.width,e.height),o=n.data,s=this.color_[0]/255,a=this.color_[1]/255,h=this.color_[2]/255,l=0,u=o.length;l<u;l+=4)o[l]*=s,o[l+1]*=a,o[l+2]*=h;i.putImageData(n,0,0)}},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(le.Z);function _e(t,e,i,r,n,o){var s=ue.c.get(e,r,o);return s||(s=new de(t,e,i,r,n,o),ue.c.set(e,r,o,s)),s}var ge=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ye=function(t){function e(e){var i=this,r=e||{},n=void 0!==r.opacity?r.opacity:1,o=void 0!==r.rotation?r.rotation:0,s=void 0!==r.scale?r.scale:1,a=void 0!==r.rotateWithView&&r.rotateWithView;i=t.call(this,{opacity:n,rotation:o,scale:s,displacement:void 0!==r.displacement?r.displacement:[0,0],rotateWithView:a})||this,i.anchor_=void 0!==r.anchor?r.anchor:[.5,.5],i.normalizedAnchor_=null,i.anchorOrigin_=void 0!==r.anchorOrigin?r.anchorOrigin:he.TOP_LEFT,i.anchorXUnits_=void 0!==r.anchorXUnits?r.anchorXUnits:ae.FRACTION,i.anchorYUnits_=void 0!==r.anchorYUnits?r.anchorYUnits:ae.FRACTION,i.crossOrigin_=void 0!==r.crossOrigin?r.crossOrigin:null;var h=void 0!==r.img?r.img:null,l=void 0!==r.imgSize?r.imgSize:null,u=r.src;(0,f.h)(!(void 0!==u&&h),4),(0,f.h)(!h||h&&l,5),void 0!==u&&0!==u.length||!h||(u=h.src||(0,I.sq)(h)),(0,f.h)(void 0!==u&&u.length>0,6);var c=void 0!==r.src?S.Z.IDLE:S.Z.LOADED;return i.color_=void 0!==r.color?(0,C._2)(r.color):null,i.iconImage_=_e(h,u,l,i.crossOrigin_,c,i.color_),i.offset_=void 0!==r.offset?r.offset:[0,0],i.offsetOrigin_=void 0!==r.offsetOrigin?r.offsetOrigin:he.TOP_LEFT,i.origin_=null,i.size_=void 0!==r.size?r.size:null,i}return ge(e,t),e.prototype.clone=function(){var t=this.getScale();return new e({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},e.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var t=this.anchor_,e=this.getSize();if(this.anchorXUnits_==ae.FRACTION||this.anchorYUnits_==ae.FRACTION){if(!e)return null;t=this.anchor_.slice(),this.anchorXUnits_==ae.FRACTION&&(t[0]*=e[0]),this.anchorYUnits_==ae.FRACTION&&(t[1]*=e[1])}if(this.anchorOrigin_!=he.TOP_LEFT){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),this.anchorOrigin_!=he.TOP_RIGHT&&this.anchorOrigin_!=he.BOTTOM_RIGHT||(t[0]=-t[0]+e[0]),this.anchorOrigin_!=he.BOTTOM_LEFT&&this.anchorOrigin_!=he.BOTTOM_RIGHT||(t[1]=-t[1]+e[1])}return this.normalizedAnchor_=t,this.normalizedAnchor_},e.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},e.prototype.getColor=function(){return this.color_},e.prototype.getImage=function(t){return this.iconImage_.getImage(t)},e.prototype.getPixelRatio=function(t){return this.iconImage_.getPixelRatio(t)},e.prototype.getImageSize=function(){return this.iconImage_.getSize()},e.prototype.getHitDetectionImageSize=function(){return this.getImageSize()},e.prototype.getImageState=function(){return this.iconImage_.getImageState()},e.prototype.getHitDetectionImage=function(t){return this.iconImage_.getHitDetectionImage(t)},e.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_,e=this.getDisplacement();if(this.offsetOrigin_!=he.TOP_LEFT){var i=this.getSize(),r=this.iconImage_.getSize();if(!i||!r)return null;t=t.slice(),this.offsetOrigin_!=he.TOP_RIGHT&&this.offsetOrigin_!=he.BOTTOM_RIGHT||(t[0]=r[0]-i[0]-t[0]),this.offsetOrigin_!=he.BOTTOM_LEFT&&this.offsetOrigin_!=he.BOTTOM_RIGHT||(t[1]=r[1]-i[1]-t[1])}return t[0]+=e[0],t[1]+=e[1],this.origin_=t,this.origin_},e.prototype.getSrc=function(){return this.iconImage_.getSrc()},e.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},e.prototype.listenImageChange=function(t){this.iconImage_.addEventListener(c.Z.CHANGE,t)},e.prototype.load=function(){this.iconImage_.load()},e.prototype.unlistenImageChange=function(t){this.iconImage_.removeEventListener(c.Z.CHANGE,t)},e}(O),ve=ye;function me(t,e,i,r,n,o,s){var a=t[0]/2,h=t[1]/2,l=(0,w.E4)(a,h);l.imageSmoothingEnabled=!1;for(var u=l.canvas,c=new se(l,.5,n,null,s),f=i.length,p=Math.floor(16777215/f),d={},_=1;_<=f;++_){var g=i[_-1],y=g.getStyleFunction()||r;if(r){var v=y(g,o);if(v){Array.isArray(v)||(v=[v]);for(var m=_*p,x="#"+("000000"+m.toString(16)).slice(-6),S=0,I=v.length;S<I;++S){var T=v[S],E=T.clone(),O=E.getFill();O&&O.setColor(x);var C=E.getStroke();C&&C.setColor(x),E.setText(void 0);var R=T.getImage();if(R){var L=R.getImageSize();if(!L)continue;var k=document.createElement("canvas");k.width=L[0],k.height=L[1];var D=k.getContext("2d",{alpha:!1});D.fillStyle=x;var F=D.canvas;D.fillRect(0,0,F.width,F.height);var b=L?L[0]:F.width,M=L?L[1]:F.height,A=(0,w.E4)(b,M);A.drawImage(F,0,0),E.setImage(new ve({img:F,imgSize:L,anchor:R.getAnchor(),anchorXUnits:ae.PIXELS,anchorYUnits:ae.PIXELS,offset:R.getOrigin(),size:R.getSize(),opacity:R.getOpacity(),scale:R.getScale(),rotation:R.getRotation(),rotateWithView:R.getRotateWithView()}))}var G=Number(E.getZIndex()),P=d[G];P||(P={},d[G]=P,P[it.Z.POLYGON]=[],P[it.Z.CIRCLE]=[],P[it.Z.LINE_STRING]=[],P[it.Z.POINT]=[]);var N=E.getGeometryFunction()(g);N&&(0,st.kK)(n,N.getExtent())&&P[N.getType().replace("Multi","")].push(N,E)}}}}for(var B=Object.keys(d).map(Number).sort(at.kK),W=(_=0,B.length);_<W;++_){P=d[B[_]];for(var Y in P){var X=P[Y];for(S=0,I=X.length;S<I;S+=2){c.setStyle(X[S+1]);for(var Z=0,z=e.length;Z<z;++Z)c.setTransform(e[Z]),c.drawGeometry(X[S])}}}return l.getImageData(0,0,u.width,u.height)}function xe(t,e,i){var r=[];if(i){var n=4*(Math.round(t[0]/2)+Math.round(t[1]/2)*i.width),o=i.data[n],s=i.data[n+1],a=i.data[n+2],h=a+256*(s+256*o),l=Math.floor(16777215/e.length);h&&h%l===0&&r.push(e[h/l-1])}return r}var Se=.5,Ie={Point:Me,LineString:De,Polygon:Ge,MultiPoint:Ae,MultiLineString:Fe,MultiPolygon:be,GeometryCollection:ke,Circle:Ce};function Te(t,e){return parseInt((0,I.sq)(t),10)-parseInt((0,I.sq)(e),10)}function Ee(t,e){var i=Oe(t,e);return i*i}function Oe(t,e){return Se*t/e}function Ce(t,e,i,r){var n=i.getFill(),o=i.getStroke();if(n||o){var s=t.getBuilder(i.getZIndex(),Ft.CIRCLE);s.setFillStrokeStyle(n,o),s.drawCircle(e,r)}var a=i.getText();if(a){var h=t.getBuilder(i.getZIndex(),Ft.TEXT);h.setTextStyle(a,t.addDeclutter(!1)),h.drawText(e,r)}}function Re(t,e,i,r,n,o){var s=!1,a=i.getImage();if(a){var h=a.getImageState();h==S.Z.LOADED||h==S.Z.ERROR?a.unlistenImageChange(n):(h==S.Z.IDLE&&a.load(),h=a.getImageState(),a.listenImageChange(n),s=!0)}return we(t,e,i,r,o),s}function we(t,e,i,r,n){var o=i.getGeometryFunction()(e);if(o){var s=o.simplifyTransformed(r,n),a=i.getRenderer();if(a)Le(t,s,i,e);else{var h=Ie[s.getType()];h(t,s,i,e)}}}function Le(t,e,i,r){if(e.getType()!=it.Z.GEOMETRY_COLLECTION){var n=t.getBuilder(i.getZIndex(),Ft.DEFAULT);n.drawCustom(e,r,i.getRenderer())}else for(var o=e.getGeometries(),s=0,a=o.length;s<a;++s)Le(t,o[s],i,r)}function ke(t,e,i,r){var n,o,s=e.getGeometriesArray();for(n=0,o=s.length;n<o;++n){var a=Ie[s[n].getType()];a(t,s[n],i,r)}}function De(t,e,i,r){var n=i.getStroke();if(n){var o=t.getBuilder(i.getZIndex(),Ft.LINE_STRING);o.setFillStrokeStyle(null,n),o.drawLineString(e,r)}var s=i.getText();if(s){var a=t.getBuilder(i.getZIndex(),Ft.TEXT);a.setTextStyle(s,t.addDeclutter(!1)),a.drawText(e,r)}}function Fe(t,e,i,r){var n=i.getStroke();if(n){var o=t.getBuilder(i.getZIndex(),Ft.LINE_STRING);o.setFillStrokeStyle(null,n),o.drawMultiLineString(e,r)}var s=i.getText();if(s){var a=t.getBuilder(i.getZIndex(),Ft.TEXT);a.setTextStyle(s,t.addDeclutter(!1)),a.drawText(e,r)}}function be(t,e,i,r){var n=i.getFill(),o=i.getStroke();if(o||n){var s=t.getBuilder(i.getZIndex(),Ft.POLYGON);s.setFillStrokeStyle(n,o),s.drawMultiPolygon(e,r)}var a=i.getText();if(a){var h=t.getBuilder(i.getZIndex(),Ft.TEXT);h.setTextStyle(a,t.addDeclutter(!1)),h.drawText(e,r)}}function Me(t,e,i,r){var n=i.getImage();if(n){if(n.getImageState()!=S.Z.LOADED)return;var o=t.getBuilder(i.getZIndex(),Ft.IMAGE);o.setImageStyle(n,t.addDeclutter(!1)),o.drawPoint(e,r)}var s=i.getText();if(s){var a=t.getBuilder(i.getZIndex(),Ft.TEXT);a.setTextStyle(s,t.addDeclutter(!!n)),a.drawText(e,r)}}function Ae(t,e,i,r){var n=i.getImage();if(n){if(n.getImageState()!=S.Z.LOADED)return;var o=t.getBuilder(i.getZIndex(),Ft.IMAGE);o.setImageStyle(n,t.addDeclutter(!1)),o.drawMultiPoint(e,r)}var s=i.getText();if(s){var a=t.getBuilder(i.getZIndex(),Ft.TEXT);a.setTextStyle(s,t.addDeclutter(!!n)),a.drawText(e,r)}}function Ge(t,e,i,r){var n=i.getFill(),o=i.getStroke();if(n||o){var s=t.getBuilder(i.getZIndex(),Ft.POLYGON);s.setFillStrokeStyle(n,o),s.drawPolygon(e,r)}var a=i.getText();if(a){var h=t.getBuilder(i.getZIndex(),Ft.TEXT);h.setTextStyle(a,t.addDeclutter(!1)),h.drawText(e,r)}}var Pe=i(1082),Ne=i(70579),Be=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),We=function(t){function e(e){var i=t.call(this,e)||this;return i.boundHandleStyleImageChange_=i.handleStyleImageChange_.bind(i),i.animatingOrInteracting_,i.dirty_=!1,i.hitDetectionImageData_=null,i.renderedFeatures_=null,i.renderedRevision_=-1,i.renderedResolution_=NaN,i.renderedExtent_=(0,st.lJ)(),i.renderedRotation_,i.renderedCenter_=null,i.renderedProjection_=null,i.renderedRenderOrder_=null,i.replayGroup_=null,i.replayGroupChanged=!0,i}return Be(e,t),e.prototype.useContainer=function(e,i,r){r<1&&(e=null),t.prototype.useContainer.call(this,e,i,r)},e.prototype.renderFrame=function(t,e){var i=t.pixelRatio,r=t.layerStatesArray[t.layerIndex];(0,Gt.n3)(this.pixelTransform,1/i,1/i),(0,Gt.nb)(this.inversePixelTransform,this.pixelTransform);var n=(0,Gt.BB)(this.pixelTransform);this.useContainer(e,n,r.opacity);var o=this.context,s=o.canvas,a=this.replayGroup_;if(!a||a.isEmpty())return!this.containerReused&&s.width>0&&(s.width=0),this.container;var h=Math.round(t.size[0]*i),l=Math.round(t.size[1]*i);s.width!=h||s.height!=l?(s.width=h,s.height=l,s.style.transform!==n&&(s.style.transform=n)):this.containerReused||o.clearRect(0,0,h,l),this.preRender(o,t);var u=t.extent,c=t.viewState,f=c.center,p=c.resolution,d=c.projection,_=c.rotation,g=d.getExtent(),y=this.getLayer().getSource(),v=!1;if(r.extent){var m=(0,Pe.dY)(r.extent,d);v=!(0,st.r4)(m,t.extent)&&(0,st.kK)(m,t.extent),v&&this.clipUnrotated(o,t,m)}var x=t.viewHints,S=!(x[ie.Z.ANIMATING]||x[ie.Z.INTERACTING]),I=this.getRenderTransform(f,p,_,i,h,l,0),T=this.getLayer().getDeclutter()?{}:null;if(a.execute(o,1,I,_,S,void 0,T),y.getWrapX()&&d.canWrapX()&&!(0,st.r4)(g,u)){var E=u[0],O=(0,st.dz)(g),C=0,R=void 0;while(E<g[0]){--C,R=O*C;var w=this.getRenderTransform(f,p,_,i,h,l,R);a.execute(o,1,w,_,S,void 0,T),E+=O}C=0,E=u[2];while(E>g[2]){++C,R=O*C;var L=this.getRenderTransform(f,p,_,i,h,l,R);a.execute(o,1,L,_,S,void 0,T),E-=O}}if(T){var k=t.viewHints,D=!(k[ie.Z.ANIMATING]||k[ie.Z.INTERACTING]);te(T,o,_,1,D,t.declutterItems)}v&&o.restore(),this.postRender(o,t);var F=r.opacity,b=this.container;return F!==parseFloat(b.style.opacity)&&(b.style.opacity=1===F?"":String(F)),this.renderedRotation_!==c.rotation&&(this.renderedRotation_=c.rotation,this.hitDetectionImageData_=null),this.container},e.prototype.getFeatures=function(t){return new Promise(function(e,i){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var r=[this.context.canvas.width,this.context.canvas.height];(0,Gt.nn)(this.pixelTransform,r);var n=this.renderedCenter_,o=this.renderedResolution_,s=this.renderedRotation_,a=this.renderedProjection_,h=this.renderedExtent_,l=this.getLayer(),u=[],c=r[0]/2,f=r[1]/2;u.push(this.getRenderTransform(n,o,s,.5,c,f,0).slice());var p=l.getSource(),d=a.getExtent();if(p.getWrapX()&&a.canWrapX()&&!(0,st.r4)(d,h)){var _=h[0],g=(0,st.dz)(d),y=0,v=void 0;while(_<d[0])--y,v=g*y,u.push(this.getRenderTransform(n,o,s,.5,c,f,v).slice()),_+=g;y=0,_=h[2];while(_>d[2])++y,v=g*y,u.push(this.getRenderTransform(n,o,s,.5,c,f,v).slice()),_-=g}this.hitDetectionImageData_=me(r,u,this.renderedFeatures_,l.getStyleFunction(),h,o,s)}e(xe(t,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,r,n){if(this.replayGroup_){var o=e.viewState.resolution,s=e.viewState.rotation,a=this.getLayer(),h={},l=this.replayGroup_.forEachFeatureAtCoordinate(t,o,s,i,(function(t){var e=(0,I.sq)(t);if(!(e in h))return h[e]=!0,r(t,a)}),a.getDeclutter()?n:null);return l}},e.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.prepareFrame=function(t){var e=this.getLayer(),i=e.getSource();if(!i)return!1;var r=t.viewHints[ie.Z.ANIMATING],n=t.viewHints[ie.Z.INTERACTING],o=e.getUpdateWhileAnimating(),s=e.getUpdateWhileInteracting();if(!this.dirty_&&!o&&r||!s&&n)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var a=t.extent,h=t.viewState,l=h.projection,u=h.resolution,c=t.pixelRatio,f=e.getRevision(),p=e.getRenderBuffer(),d=e.getRenderOrder();void 0===d&&(d=Te);var _=h.center.slice(),g=(0,st.f3)(a,p*u),y=[g.slice()],v=l.getExtent();if(i.getWrapX()&&l.canWrapX()&&!(0,st.r4)(v,t.extent)){var m=(0,st.dz)(v),x=Math.max((0,st.dz)(g)/2,m);g[0]=v[0]-x,g[2]=v[2]+x,(0,Ne.Cf)(_,l);var S=(0,st.Cf)(y[0],l);S[0]<v[0]&&S[2]<v[2]?y.push([S[0]+m,S[1],S[2]+m,S[3]]):S[0]>v[0]&&S[2]>v[2]&&y.push([S[0]-m,S[1],S[2]-m,S[3]])}if(!this.dirty_&&this.renderedResolution_==u&&this.renderedRevision_==f&&this.renderedRenderOrder_==d&&(0,st.r4)(this.renderedExtent_,g))return this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var I,T=new kt(Oe(u,c),g,u,c,e.getDeclutter()),E=(0,Pe.Cs)();if(E){for(var O=0,C=y.length;O<C;++O)i.loadFeatures((0,Pe.Fj)(y[O],l),u,E);I=(0,Pe.WO)(E,l)}else for(O=0,C=y.length;O<C;++O)i.loadFeatures(y[O],u,l);var R=Ee(u,c),w=function(t){var i,r=t.getStyleFunction()||e.getStyleFunction();if(r&&(i=r(t,u)),i){var n=this.renderFeature(t,R,i,T,I);this.dirty_=this.dirty_||n}}.bind(this),L=(0,Pe.Fj)(g,l),k=i.getFeaturesInExtent(L);d&&k.sort(d);for(O=0,C=k.length;O<C;++O)w(k[O]);this.renderedFeatures_=k;var D=T.finish(),F=new ee(g,u,c,i.getOverlaps(),D,e.getRenderBuffer());return this.renderedResolution_=u,this.renderedRevision_=f,this.renderedRenderOrder_=d,this.renderedExtent_=g,this.renderedCenter_=_,this.renderedProjection_=l,this.replayGroup_=F,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},e.prototype.renderFeature=function(t,e,i,r,n){if(!i)return!1;var o=!1;if(Array.isArray(i))for(var s=0,a=i.length;s<a;++s)o=Re(r,t,i[s],e,this.boundHandleStyleImageChange_,n)||o;else o=Re(r,t,i,e,this.boundHandleStyleImageChange_,n);return o},e}(Dt.Z),Ye=We,Xe=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ze=function(t){function e(e){return t.call(this,e)||this}return Xe(e,t),e.prototype.createRenderer=function(){return new Ye(this)},e}(J),ze=Ze,He=i(95397),Ue=i(89334),Ke=i(14067),Ve=i(95160),Je=function(){function t(t){this.rbush_=new(Mt())(t),this.items_={}}return t.prototype.insert=function(t,e){var i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(i),this.items_[(0,I.sq)(e)]=i},t.prototype.load=function(t,e){for(var i=new Array(e.length),r=0,n=e.length;r<n;r++){var o=t[r],s=e[r],a={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:s};i[r]=a,this.items_[(0,I.sq)(s)]=a}this.rbush_.load(i)},t.prototype.remove=function(t){var e=(0,I.sq)(t),i=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(i)},t.prototype.update=function(t,e){var i=this.items_[(0,I.sq)(e)],r=[i.minX,i.minY,i.maxX,i.maxY];(0,st.fS)(r,t)||(this.remove(e),this.insert(t,e))},t.prototype.getAll=function(){var t=this.rbush_.all();return t.map((function(t){return t.value}))},t.prototype.getInExtent=function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]},i=this.rbush_.search(e);return i.map((function(t){return t.value}))},t.prototype.forEach=function(t){return this.forEach_(this.getAll(),t)},t.prototype.forEachInExtent=function(t,e){return this.forEach_(this.getInExtent(t),e)},t.prototype.forEach_=function(t,e){for(var i,r=0,n=t.length;r<n;r++)if(i=e(t[r]),i)return i;return i},t.prototype.isEmpty=function(){return(0,x.xb)(this.items_)},t.prototype.clear=function(){this.rbush_.clear(),this.items_={}},t.prototype.getExtent=function(t){var e=this.rbush_.toJSON();return(0,st.T9)(e.minX,e.minY,e.maxX,e.maxY,t)},t.prototype.concat=function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[e]=t.items_[e]},t}(),je=Je,qe=i(67444),$e=i(82457),Qe={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature"},ti=i(13082);function ei(t,e){return[[-1/0,-1/0,1/0,1/0]]}var ii={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"},ri=!1;function ni(t,e,i,r){return function(n,o,s){var a=new XMLHttpRequest;a.open("GET","function"===typeof t?t(n,o,s):t,!0),e.getType()==ii.ARRAY_BUFFER&&(a.responseType="arraybuffer"),a.withCredentials=ri,a.onload=function(t){if(!a.status||a.status>=200&&a.status<300){var o=e.getType(),h=void 0;o==ii.JSON||o==ii.TEXT?h=a.responseText:o==ii.XML?(h=a.responseXML,h||(h=(new DOMParser).parseFromString(a.responseText,"application/xml"))):o==ii.ARRAY_BUFFER&&(h=a.response),h?i.call(this,e.readFeatures(h,{extent:n,featureProjection:s}),e.readProjection(h)):r.call(this)}else r.call(this)}.bind(this),a.onerror=function(){r.call(this)}.bind(this),a.send()}}function oi(t,e){return ni(t,e,(function(t,e){var i=this;"function"===typeof i.addFeatures&&i.addFeatures(t)}),ti.Zn)}var si=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ai=function(t){function e(e,i){var r=t.call(this,e)||this;return r.feature=i,r}return si(e,t),e}(Ke.ZP),hi=function(t){function e(e){var i=this,r=e||{};i=t.call(this,{attributions:r.attributions,projection:void 0,state:$e.Z.READY,wrapX:void 0===r.wrapX||r.wrapX})||this,i.loader_=ti.Zn,i.format_=r.format,i.overlaps_=void 0===r.overlaps||r.overlaps,i.url_=r.url,void 0!==r.loader?i.loader_=r.loader:void 0!==i.url_&&((0,f.h)(i.format_,7),i.loader_=oi(i.url_,i.format_)),i.strategy_=void 0!==r.strategy?r.strategy:ei;var n,o,s=void 0===r.useSpatialIndex||r.useSpatialIndex;return i.featuresRtree_=s?new je:null,i.loadedExtentsRtree_=new je,i.nullGeometryFeatures_={},i.idIndex_={},i.uidIndex_={},i.featureChangeKeys_={},i.featuresCollection_=null,Array.isArray(r.features)?o=r.features:r.features&&(n=r.features,o=n.getArray()),s||void 0!==n||(n=new He.Z(o)),void 0!==o&&i.addFeaturesInternal(o),void 0!==n&&i.bindFeaturesCollection_(n),i}return si(e,t),e.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},e.prototype.addFeatureInternal=function(t){var e=(0,I.sq)(t);if(this.addToIndex_(e,t)){this.setupChangeEvents_(e,t);var i=t.getGeometry();if(i){var r=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new ai(Qe.ADDFEATURE,t))}else this.featuresCollection_&&this.featuresCollection_.remove(t)},e.prototype.setupChangeEvents_=function(t,e){this.featureChangeKeys_[t]=[(0,p.oL)(e,c.Z.CHANGE,this.handleFeatureChange_,this),(0,p.oL)(e,Ve.Z.PROPERTYCHANGE,this.handleFeatureChange_,this)]},e.prototype.addToIndex_=function(t,e){var i=!0,r=e.getId();return void 0!==r&&(r.toString()in this.idIndex_?i=!1:this.idIndex_[r.toString()]=e),i&&((0,f.h)(!(t in this.uidIndex_),30),this.uidIndex_[t]=e),i},e.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},e.prototype.addFeaturesInternal=function(t){for(var e=[],i=[],r=[],n=0,o=t.length;n<o;n++){var s=t[n],a=(0,I.sq)(s);this.addToIndex_(a,s)&&i.push(s)}n=0;for(var h=i.length;n<h;n++){s=i[n],a=(0,I.sq)(s);this.setupChangeEvents_(a,s);var l=s.getGeometry();if(l){var u=l.getExtent();e.push(u),r.push(s)}else this.nullGeometryFeatures_[a]=s}this.featuresRtree_&&this.featuresRtree_.load(e,r);n=0;for(var c=i.length;n<c;n++)this.dispatchEvent(new ai(Qe.ADDFEATURE,i[n]))},e.prototype.bindFeaturesCollection_=function(t){var e=!1;this.addEventListener(Qe.ADDFEATURE,(function(i){e||(e=!0,t.push(i.feature),e=!1)})),this.addEventListener(Qe.REMOVEFEATURE,(function(i){e||(e=!0,t.remove(i.feature),e=!1)})),t.addEventListener(Ue.Z.ADD,function(t){e||(e=!0,this.addFeature(t.element),e=!1)}.bind(this)),t.addEventListener(Ue.Z.REMOVE,function(t){e||(e=!0,this.removeFeature(t.element),e=!1)}.bind(this)),this.featuresCollection_=t},e.prototype.clear=function(t){if(t){for(var e in this.featureChangeKeys_){var i=this.featureChangeKeys_[e];i.forEach(p.bN)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_)for(var r in this.featuresRtree_.forEach(this.removeFeatureInternal.bind(this)),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var n=new ai(Qe.CLEAR);this.dispatchEvent(n),this.changed()},e.prototype.forEachFeature=function(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},e.prototype.forEachFeatureAtCoordinateDirect=function(t,e){var i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,(function(i){var r=i.getGeometry();return r.intersectsCoordinate(t)?e(i):void 0}))},e.prototype.forEachFeatureInExtent=function(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},e.prototype.forEachFeatureIntersectingExtent=function(t,e){return this.forEachFeatureInExtent(t,(function(i){var r=i.getGeometry();if(r.intersectsExtent(t)){var n=e(i);if(n)return n}}))},e.prototype.getFeaturesCollection=function(){return this.featuresCollection_},e.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray():this.featuresRtree_&&(t=this.featuresRtree_.getAll(),(0,x.xb)(this.nullGeometryFeatures_)||(0,at.l7)(t,(0,x.KX)(this.nullGeometryFeatures_))),t},e.prototype.getFeaturesAtCoordinate=function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,(function(t){e.push(t)})),e},e.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_?this.featuresRtree_.getInExtent(t):this.featuresCollection_?this.featuresCollection_.getArray():[]},e.prototype.getClosestFeatureToCoordinate=function(t,e){var i=t[0],r=t[1],n=null,o=[NaN,NaN],s=1/0,a=[-1/0,-1/0,1/0,1/0],h=e||ti.uX;return this.featuresRtree_.forEachInExtent(a,(function(t){if(h(t)){var e=t.getGeometry(),l=s;if(s=e.closestPointXY(i,r,o,s),s<l){n=t;var u=Math.sqrt(s);a[0]=i-u,a[1]=r-u,a[2]=i+u,a[3]=r+u}}})),n},e.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},e.prototype.getFeatureById=function(t){var e=this.idIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getFeatureByUid=function(t){var e=this.uidIndex_[t];return void 0!==e?e:null},e.prototype.getFormat=function(){return this.format_},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.getUrl=function(){return this.url_},e.prototype.handleFeatureChange_=function(t){var e=t.target,i=(0,I.sq)(e),r=e.getGeometry();if(r){var n=r.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(n,e)):this.featuresRtree_&&this.featuresRtree_.update(n,e)}else i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);var o=e.getId();if(void 0!==o){var s=o.toString();this.idIndex_[s]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[s]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[i]=e;this.changed(),this.dispatchEvent(new ai(Qe.CHANGEFEATURE,e))},e.prototype.hasFeature=function(t){var e=t.getId();return void 0!==e?e in this.idIndex_:(0,I.sq)(t)in this.uidIndex_},e.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&(0,x.xb)(this.nullGeometryFeatures_)},e.prototype.loadFeatures=function(t,e,i){var r=this.loadedExtentsRtree_,n=this.strategy_(t,e);this.loading=!1;for(var o=function(t,o){var a=n[t],h=r.forEachInExtent(a,(function(t){return(0,st.r4)(t.extent,a)}));h||(s.loader_.call(s,a,e,i),r.insert(a,{extent:a.slice()}),s.loading=s.loader_!==ti.Zn)},s=this,a=0,h=n.length;a<h;++a)o(a,h)},e.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),t.prototype.refresh.call(this)},e.prototype.removeLoadedExtent=function(t){var e,i=this.loadedExtentsRtree_;i.forEachInExtent(t,(function(i){if((0,st.fS)(i.extent,t))return e=i,!0})),e&&i.remove(e)},e.prototype.removeFeature=function(t){var e=(0,I.sq)(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},e.prototype.removeFeatureInternal=function(t){var e=(0,I.sq)(t);this.featureChangeKeys_[e].forEach(p.bN),delete this.featureChangeKeys_[e];var i=t.getId();void 0!==i&&delete this.idIndex_[i.toString()],delete this.uidIndex_[e],this.dispatchEvent(new ai(Qe.REMOVEFEATURE,t))},e.prototype.removeFromIdIndex_=function(t){var e=!1;for(var i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],e=!0;break}return e},e.prototype.setLoader=function(t){this.loader_=t},e.prototype.setUrl=function(t){(0,f.h)(this.format_,7),this.setLoader(oi(t,this.format_))},e}(qe.Z),li=hi;let ui=null;var ci={data(){return{}},mounted(){this.initMap()},beforeDestroy(){this.clearMap()},computed:{nodeInfoAll(){return this.$store.state.results},nodeInfo(){return this.$store.state.results.nodeInfo},nodeSpatical(){return this.$store.state.results.nodeSpatical}},methods:{initMap(){ui=new h.Z({target:"olMap",view:new l.ZP({center:[114.5,30.5],zoom:5,projection:"EPSG:4326"}),controls:(0,a.ce)({zoom:!0,attribution:!1,rotate:!1})});let t="http://t{0-7}.tianditu.com/DataServer?x={x}&y={y}&l={z}";t=`${t}&T=vec_c&tk=7a574f33b90173055cef00fca14a889a`;const e=new s.Z({url:t,projection:"EPSG:4326"}),i=new o.Z({source:e});ui.addLayer(i),t="http://t{0-7}.tianditu.com/DataServer?x={x}&y={y}&l={z}",t=`${t}&T=cva_c&tk=7a574f33b90173055cef00fca14a889a`;const r=new s.Z({url:t,projection:"EPSG:4326"}),n=new o.Z({source:r});ui.addLayer(n)},addMyLayer(t){const e=new y({geometry:new v.ZP([[[this.nodeSpatical.southWestLatL,this.nodeSpatical.northEastLatB],[this.nodeSpatical.southWestLatL,this.nodeSpatical.southWestLatB],[this.nodeSpatical.northEastLatL,this.nodeSpatical.southWestLatB],[this.nodeSpatical.northEastLatL,this.nodeSpatical.northEastLatB],[this.nodeSpatical.southWestLatL,this.nodeSpatical.northEastLatB]]])});e.setStyle(new H({stroke:new B({color:"red",width:2}),fill:new P({color:"rgba(255, 0, 0, 0.1)"})}));const i=new ze({source:new li({features:[e]})});t.addLayer(i)},clearMapLayers(){const t=ui.getLayers();console.log("当前图层",t),t.forEach(((t,e)=>{e>1&&ui.removeLayer(t)}))},clearMap(){ui=null}},watch:{nodeSpatical(t,e){t!==e&&(this.clearMapLayers(),this.addMyLayer(ui))}}},fi=ci,pi=i(1001),di=(0,pi.Z)(fi,r,n,!1,null,"0ec1fadf",null),_i=di.exports},30001:function(t,e,i){i(57658),function(e,i){t.exports=i()}(0,(function(){"use strict";function t(t,i,n,o,s){e(t,i,n||0,o||t.length-1,s||r)}function e(t,r,n,o,s){while(o>n){if(o-n>600){var a=o-n+1,h=r-n+1,l=Math.log(a),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(a-u)/a)*(h-a/2<0?-1:1),f=Math.max(n,Math.floor(r-h*u/a+c)),p=Math.min(o,Math.floor(r+(a-h)*u/a+c));e(t,r,f,p,s)}var d=t[r],_=n,g=o;i(t,n,r),s(t[o],d)>0&&i(t,n,o);while(_<g){i(t,_,g),_++,g--;while(s(t[_],d)<0)_++;while(s(t[g],d)>0)g--}0===s(t[n],d)?i(t,n,g):(g++,i(t,g,o)),g<=r&&(n=g+1),r<=g&&(o=g-1)}}function i(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function r(t,e){return t<e?-1:t>e?1:0}var n=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function o(t,e,i){if(!i)return e.indexOf(t);for(var r=0;r<e.length;r++)if(i(t,e[r]))return r;return-1}function s(t,e){a(t,0,t.children.length,e,t)}function a(t,e,i,r,n){n||(n=y(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var o=e;o<i;o++){var s=t.children[o];h(n,t.leaf?r(s):s)}return n}function h(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function u(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function f(t){return t.maxX-t.minX+(t.maxY-t.minY)}function p(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function d(t,e){var i=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),n=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,n-i)*Math.max(0,o-r)}function _(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function g(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function y(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function v(e,i,r,n,o){var s=[i,r];while(s.length)if(r=s.pop(),i=s.pop(),!(r-i<=n)){var a=i+Math.ceil((r-i)/n/2)*n;t(e,a,i,r,o),s.push(i,a,a,r)}}return n.prototype.all=function(){return this._all(this.data,[])},n.prototype.search=function(t){var e=this.data,i=[];if(!g(t,e))return i;var r=this.toBBox,n=[];while(e){for(var o=0;o<e.children.length;o++){var s=e.children[o],a=e.leaf?r(s):s;g(t,a)&&(e.leaf?i.push(s):_(t,a)?this._all(s,i):n.push(s))}e=n.pop()}return i},n.prototype.collides=function(t){var e=this.data;if(!g(t,e))return!1;var i=[];while(e){for(var r=0;r<e.children.length;r++){var n=e.children[r],o=e.leaf?this.toBBox(n):n;if(g(t,o)){if(e.leaf||_(t,o))return!0;i.push(n)}}e=i.pop()}return!1},n.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var r=this.data;this.data=i,i=r}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},n.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},n.prototype.clear=function(){return this.data=y([]),this},n.prototype.remove=function(t,e){if(!t)return this;var i,r,n,s=this.data,a=this.toBBox(t),h=[],l=[];while(s||h.length){if(s||(s=h.pop(),r=h[h.length-1],i=l.pop(),n=!0),s.leaf){var u=o(t,s.children,e);if(-1!==u)return s.children.splice(u,1),h.push(s),this._condense(h),this}n||s.leaf||!_(s,a)?r?(i++,s=r.children[i],n=!1):s=null:(h.push(s),l.push(i),i=0,r=s,s=s.children[0])}return this},n.prototype.toBBox=function(t){return t},n.prototype.compareMinX=function(t,e){return t.minX-e.minX},n.prototype.compareMinY=function(t,e){return t.minY-e.minY},n.prototype.toJSON=function(){return this.data},n.prototype.fromJSON=function(t){return this.data=t,this},n.prototype._all=function(t,e){var i=[];while(t)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},n.prototype._build=function(t,e,i,r){var n,o=i-e+1,a=this._maxEntries;if(o<=a)return n=y(t.slice(e,i+1)),s(n,this.toBBox),n;r||(r=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,r-1))),n=y([]),n.leaf=!1,n.height=r;var h=Math.ceil(o/a),l=h*Math.ceil(Math.sqrt(a));v(t,e,i,l,this.compareMinX);for(var u=e;u<=i;u+=l){var c=Math.min(u+l-1,i);v(t,u,c,h,this.compareMinY);for(var f=u;f<=c;f+=h){var p=Math.min(f+h-1,c);n.children.push(this._build(t,f,p,r-1))}}return s(n,this.toBBox),n},n.prototype._chooseSubtree=function(t,e,i,r){while(1){if(r.push(e),e.leaf||r.length-1===i)break;for(var n=1/0,o=1/0,s=void 0,a=0;a<e.children.length;a++){var h=e.children[a],l=c(h),u=p(t,h)-l;u<o?(o=u,n=l<n?l:n,s=h):u===o&&l<n&&(n=l,s=h)}e=s||e.children[0]}return e},n.prototype._insert=function(t,e,i){var r=i?t:this.toBBox(t),n=[],o=this._chooseSubtree(r,this.data,e,n);o.children.push(t),h(o,r);while(e>=0){if(!(n[e].children.length>this._maxEntries))break;this._split(n,e),e--}this._adjustParentBBoxes(r,n,e)},n.prototype._split=function(t,e){var i=t[e],r=i.children.length,n=this._minEntries;this._chooseSplitAxis(i,n,r);var o=this._chooseSplitIndex(i,n,r),a=y(i.children.splice(o,i.children.length-o));a.height=i.height,a.leaf=i.leaf,s(i,this.toBBox),s(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(i,a)},n.prototype._splitRoot=function(t,e){this.data=y([t,e]),this.data.height=t.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},n.prototype._chooseSplitIndex=function(t,e,i){for(var r,n=1/0,o=1/0,s=e;s<=i-e;s++){var h=a(t,0,s,this.toBBox),l=a(t,s,i,this.toBBox),u=d(h,l),f=c(h)+c(l);u<n?(n=u,r=s,o=f<o?f:o):u===n&&f<o&&(o=f,r=s)}return r||i-e},n.prototype._chooseSplitAxis=function(t,e,i){var r=t.leaf?this.compareMinX:l,n=t.leaf?this.compareMinY:u,o=this._allDistMargin(t,e,i,r),s=this._allDistMargin(t,e,i,n);o<s&&t.children.sort(r)},n.prototype._allDistMargin=function(t,e,i,r){t.children.sort(r);for(var n=this.toBBox,o=a(t,0,e,n),s=a(t,i-e,i,n),l=f(o)+f(s),u=e;u<i-e;u++){var c=t.children[u];h(o,t.leaf?n(c):c),l+=f(o)}for(var p=i-e-1;p>=e;p--){var d=t.children[p];h(s,t.leaf?n(d):d),l+=f(s)}return l},n.prototype._adjustParentBBoxes=function(t,e,i){for(var r=i;r>=0;r--)h(e[r],t)},n.prototype._condense=function(t){for(var e=t.length-1,i=void 0;e>=0;e--)0===t[e].children.length?e>0?(i=t[e-1].children,i.splice(i.indexOf(t[e]),1)):this.clear():s(t[e],this.toBBox)},n}))},41490:function(t,e,i){"use strict";var r=i(58576);const n={find:"/findGeoResultList",tree:"/getGeoResultTree"};e.Z={findGeoResultList(t,e){return(0,r.Z)({method:"GET",url:n.find,params:{status:e,resultName:t,includeAnnex:!1}})},getGeoResultTree(){return(0,r.Z)({method:"GET",url:n.tree})}}}}]);
//# sourceMappingURL=615.8fde5ccb.js.map